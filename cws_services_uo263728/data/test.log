/*C2*/SET SCHEMA PUBLIC
DISCONNECT
/*C3*/SET SCHEMA PUBLIC
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
DISCONNECT
/*C4*/SET SCHEMA PUBLIC
DISCONNECT
/*C5*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TCONTRACTTYPES VALUES('d25c998e-6ea9-4d6e-9194-e6d7cefa88eb',2.0E0,'contract-type-name',1)
INSERT INTO TMECHANICS VALUES('cafff4c2-2d9d-4362-90c8-53d28675dd6c','mechanic-dni','no-name','no-surname',1)
INSERT INTO TPROFESSIONALGROUPS VALUES('1033eb5c-35b0-4d2d-bb17-bb3393a1e3af','professional-group-name',10.0E0,300.0E0,1)
INSERT INTO TCONTRACTS VALUES('2975f819-d703-42d9-bdcd-208429260ef4',3000.0E0,'2022-11-30',0.0E0,'2022-11-20','TERMINATED',1,'d25c998e-6ea9-4d6e-9194-e6d7cefa88eb','cafff4c2-2d9d-4362-90c8-53d28675dd6c','1033eb5c-35b0-4d2d-bb17-bb3393a1e3af','cafff4c2-2d9d-4362-90c8-53d28675dd6c')
COMMIT
DELETE FROM TCONTRACTS WHERE ID='2975f819-d703-42d9-bdcd-208429260ef4'
DELETE FROM TPROFESSIONALGROUPS WHERE ID='1033eb5c-35b0-4d2d-bb17-bb3393a1e3af'
DELETE FROM TMECHANICS WHERE ID='cafff4c2-2d9d-4362-90c8-53d28675dd6c'
DELETE FROM TCONTRACTTYPES WHERE ID='d25c998e-6ea9-4d6e-9194-e6d7cefa88eb'
COMMIT
DISCONNECT
/*C6*/SET SCHEMA PUBLIC
DISCONNECT
/*C7*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TCONTRACTTYPES VALUES('5fccc4db-a2a3-4ddc-8382-f871d7e75762',2.0E0,'contract-type-name',1)
INSERT INTO TMECHANICS VALUES('fb810f9c-2da4-4614-b027-a8ccd48711c1','mechanic-dni','no-name','no-surname',1)
INSERT INTO TPROFESSIONALGROUPS VALUES('110311de-b9e9-4fe3-a476-08e9e8b66252','professional-group-name',10.0E0,300.0E0,1)
INSERT INTO TCONTRACTS VALUES('87e75b97-cd3e-4b6c-8e66-8c5476025b66',3000.0E0,'2022-11-30',0.0E0,'2022-11-20','TERMINATED',1,'5fccc4db-a2a3-4ddc-8382-f871d7e75762','fb810f9c-2da4-4614-b027-a8ccd48711c1','110311de-b9e9-4fe3-a476-08e9e8b66252','fb810f9c-2da4-4614-b027-a8ccd48711c1')
COMMIT
DELETE FROM TCONTRACTS WHERE ID='87e75b97-cd3e-4b6c-8e66-8c5476025b66'
DELETE FROM TPROFESSIONALGROUPS WHERE ID='110311de-b9e9-4fe3-a476-08e9e8b66252'
DELETE FROM TMECHANICS WHERE ID='fb810f9c-2da4-4614-b027-a8ccd48711c1'
DELETE FROM TCONTRACTTYPES WHERE ID='5fccc4db-a2a3-4ddc-8382-f871d7e75762'
COMMIT
DISCONNECT
/*C8*/SET SCHEMA PUBLIC
DISCONNECT
/*C9*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TCONTRACTTYPES VALUES('de7884d1-5d57-41bf-a618-e880f7e14677',2.0E0,'contract-type-name',1)
INSERT INTO TMECHANICS VALUES('274d5918-4477-4c4d-b080-eedf7e3dfbe3','mechanic-dni','no-name','no-surname',1)
INSERT INTO TPROFESSIONALGROUPS VALUES('ff0f0b08-3e4c-4a9c-8bef-ea889c291f08','professional-group-name',10.0E0,300.0E0,1)
INSERT INTO TCONTRACTS VALUES('5b68043c-79cf-4326-8b2d-c7750c4b7d74',3000.0E0,'2022-11-30',0.0E0,'2022-11-20','IN_FORCE',1,'de7884d1-5d57-41bf-a618-e880f7e14677',NULL,'ff0f0b08-3e4c-4a9c-8bef-ea889c291f08','274d5918-4477-4c4d-b080-eedf7e3dfbe3')
COMMIT
DELETE FROM TCONTRACTS WHERE ID='5b68043c-79cf-4326-8b2d-c7750c4b7d74'
DELETE FROM TPROFESSIONALGROUPS WHERE ID='ff0f0b08-3e4c-4a9c-8bef-ea889c291f08'
DELETE FROM TMECHANICS WHERE ID='274d5918-4477-4c4d-b080-eedf7e3dfbe3'
DELETE FROM TCONTRACTTYPES WHERE ID='de7884d1-5d57-41bf-a618-e880f7e14677'
COMMIT
DISCONNECT
/*C10*/SET SCHEMA PUBLIC
DISCONNECT
/*C11*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TCONTRACTTYPES VALUES('8b2a2719-e3f3-47f0-8a73-b67374853c14',2.0E0,'contract-type-name',1)
INSERT INTO TMECHANICS VALUES('bd7972c5-f5f0-4163-bd69-ee21c5bb21d4','mechanic-dni','no-name','no-surname',1)
INSERT INTO TPROFESSIONALGROUPS VALUES('242f3d9b-710d-49b2-afcc-a4c791fe429e','professional-group-name',10.0E0,300.0E0,1)
INSERT INTO TCONTRACTS VALUES('bfcfcfcc-17f4-4889-bd3d-8792e75daed2',3000.0E0,'2022-11-30',0.0E0,'2022-11-20','IN_FORCE',1,'8b2a2719-e3f3-47f0-8a73-b67374853c14',NULL,'242f3d9b-710d-49b2-afcc-a4c791fe429e','bd7972c5-f5f0-4163-bd69-ee21c5bb21d4')
COMMIT
DELETE FROM TCONTRACTS WHERE ID='bfcfcfcc-17f4-4889-bd3d-8792e75daed2'
DELETE FROM TPROFESSIONALGROUPS WHERE ID='242f3d9b-710d-49b2-afcc-a4c791fe429e'
DELETE FROM TMECHANICS WHERE ID='bd7972c5-f5f0-4163-bd69-ee21c5bb21d4'
DELETE FROM TCONTRACTTYPES WHERE ID='8b2a2719-e3f3-47f0-8a73-b67374853c14'
COMMIT
DISCONNECT
/*C12*/SET SCHEMA PUBLIC
DISCONNECT
/*C13*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TCONTRACTTYPES VALUES('49312d7f-ba8e-43b7-a9d7-33052adba37b',2.0E0,'contract-type-name',1)
INSERT INTO TMECHANICS VALUES('3fc0f494-283b-4b73-b54c-5e54887a3ebb','mechanic-dni','no-name','no-surname',1)
INSERT INTO TPROFESSIONALGROUPS VALUES('626daec7-bd60-4756-890e-82ef8e874a2b','professional-group-name',10.0E0,300.0E0,1)
INSERT INTO TCONTRACTS VALUES('04893771-4c0f-49ec-adfc-e0f0dbef6073',3000.0E0,'2022-11-30',0.0E0,'2022-11-20','IN_FORCE',1,'49312d7f-ba8e-43b7-a9d7-33052adba37b',NULL,'626daec7-bd60-4756-890e-82ef8e874a2b','3fc0f494-283b-4b73-b54c-5e54887a3ebb')
COMMIT
DELETE FROM TCONTRACTS WHERE ID='04893771-4c0f-49ec-adfc-e0f0dbef6073'
DELETE FROM TPROFESSIONALGROUPS WHERE ID='626daec7-bd60-4756-890e-82ef8e874a2b'
DELETE FROM TMECHANICS WHERE ID='3fc0f494-283b-4b73-b54c-5e54887a3ebb'
DELETE FROM TCONTRACTTYPES WHERE ID='49312d7f-ba8e-43b7-a9d7-33052adba37b'
COMMIT
DISCONNECT
/*C14*/SET SCHEMA PUBLIC
DISCONNECT
/*C15*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TCONTRACTTYPES VALUES('967644f9-026d-44b0-b0db-292a12aaf90d',2.0E0,'contract-type-name',1)
INSERT INTO TMECHANICS VALUES('9cd405bf-09ec-45ca-9599-097cd7efb7f3','mechanic-dni','no-name','no-surname',1)
INSERT INTO TPROFESSIONALGROUPS VALUES('d62f40f4-43dc-4e76-ad26-6f733b5a64e0','professional-group-name',10.0E0,300.0E0,1)
INSERT INTO TCONTRACTS VALUES('a75eea52-544f-43ff-b600-f250f5e7f756',3000.0E0,'2022-11-30',0.0E0,'2022-11-20','IN_FORCE',1,'967644f9-026d-44b0-b0db-292a12aaf90d',NULL,'d62f40f4-43dc-4e76-ad26-6f733b5a64e0','9cd405bf-09ec-45ca-9599-097cd7efb7f3')
COMMIT
DELETE FROM TCONTRACTS WHERE ID='a75eea52-544f-43ff-b600-f250f5e7f756'
DELETE FROM TPROFESSIONALGROUPS WHERE ID='d62f40f4-43dc-4e76-ad26-6f733b5a64e0'
DELETE FROM TMECHANICS WHERE ID='9cd405bf-09ec-45ca-9599-097cd7efb7f3'
DELETE FROM TCONTRACTTYPES WHERE ID='967644f9-026d-44b0-b0db-292a12aaf90d'
COMMIT
DISCONNECT
/*C16*/SET SCHEMA PUBLIC
DISCONNECT
/*C17*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TCONTRACTTYPES VALUES('79710bf7-4dc7-49f7-8b8d-b9b8c88e4355',2.0E0,'contract-type-name',1)
INSERT INTO TMECHANICS VALUES('4efc0a31-17b5-44ba-91bc-411f54d5eae1','mechanic-dni','no-name','no-surname',1)
INSERT INTO TPROFESSIONALGROUPS VALUES('b370b570-4e20-4a63-98f2-c86cd0528bb4','professional-group-name',10.0E0,300.0E0,1)
INSERT INTO TCONTRACTS VALUES('62d07400-ab82-4305-8623-606d7bfee7ef',3000.0E0,'2022-11-30',0.0E0,'2022-11-20','IN_FORCE',1,'79710bf7-4dc7-49f7-8b8d-b9b8c88e4355',NULL,'b370b570-4e20-4a63-98f2-c86cd0528bb4','4efc0a31-17b5-44ba-91bc-411f54d5eae1')
INSERT INTO TPAYROLLS VALUES('80641c55-0475-4ea2-970c-bda5ef8b4d36',0.0E0,'2022-11-20',40.72E0,214.29E0,12.5E0,0.0E0,0.0E0,1,'62d07400-ab82-4305-8623-606d7bfee7ef')
COMMIT
DELETE FROM TPAYROLLS WHERE ID='80641c55-0475-4ea2-970c-bda5ef8b4d36'
DELETE FROM TCONTRACTS WHERE ID='62d07400-ab82-4305-8623-606d7bfee7ef'
DELETE FROM TPROFESSIONALGROUPS WHERE ID='b370b570-4e20-4a63-98f2-c86cd0528bb4'
DELETE FROM TMECHANICS WHERE ID='4efc0a31-17b5-44ba-91bc-411f54d5eae1'
DELETE FROM TCONTRACTTYPES WHERE ID='79710bf7-4dc7-49f7-8b8d-b9b8c88e4355'
COMMIT
DISCONNECT
/*C18*/SET SCHEMA PUBLIC
DISCONNECT
/*C19*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TCONTRACTTYPES VALUES('d5b94fa7-07ef-4b03-91fc-c19747b51566',2.0E0,'contract-type-name',1)
INSERT INTO TMECHANICS VALUES('e768127d-0d53-48e7-bcc3-ffa766f4ec7f','mechanic-dni','no-name','no-surname',1)
INSERT INTO TPROFESSIONALGROUPS VALUES('5bfe85e4-92ff-49b1-8bac-768b04cb9ac6','professional-group-name',10.0E0,300.0E0,1)
INSERT INTO TCONTRACTS VALUES('5d457ef0-abc4-42e4-a550-d6f73ec56afb',3000.0E0,'2022-11-30',0.0E0,'2022-11-20','IN_FORCE',1,'d5b94fa7-07ef-4b03-91fc-c19747b51566',NULL,'5bfe85e4-92ff-49b1-8bac-768b04cb9ac6','e768127d-0d53-48e7-bcc3-ffa766f4ec7f')
INSERT INTO TPAYROLLS VALUES('be3b423a-3181-4f85-941f-6c73bb833c4c',0.0E0,'2022-11-20',40.72E0,214.29E0,12.5E0,0.0E0,0.0E0,1,'5d457ef0-abc4-42e4-a550-d6f73ec56afb')
COMMIT
DELETE FROM TPAYROLLS WHERE ID='be3b423a-3181-4f85-941f-6c73bb833c4c'
DELETE FROM TCONTRACTS WHERE ID='5d457ef0-abc4-42e4-a550-d6f73ec56afb'
DELETE FROM TPROFESSIONALGROUPS WHERE ID='5bfe85e4-92ff-49b1-8bac-768b04cb9ac6'
DELETE FROM TMECHANICS WHERE ID='e768127d-0d53-48e7-bcc3-ffa766f4ec7f'
DELETE FROM TCONTRACTTYPES WHERE ID='d5b94fa7-07ef-4b03-91fc-c19747b51566'
COMMIT
DISCONNECT
/*C20*/SET SCHEMA PUBLIC
DISCONNECT
/*C21*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TCONTRACTTYPES VALUES('9b71185a-33b3-4d0a-b0d7-25a802edf5d0',2.0E0,'contract-type-name',1)
INSERT INTO TMECHANICS VALUES('9192ae05-5aaf-4831-a17f-a09e78f2c1ef','mechanic-dni','no-name','no-surname',1)
INSERT INTO TPROFESSIONALGROUPS VALUES('4a7b8bd4-e7d1-4da8-982a-73362f2f85b3','professional-group-name',10.0E0,300.0E0,1)
INSERT INTO TCONTRACTS VALUES('9b6baf90-b109-4276-a2cf-c12064ca7ec3',3000.0E0,'2022-11-30',0.0E0,'2022-11-20','IN_FORCE',1,'9b71185a-33b3-4d0a-b0d7-25a802edf5d0',NULL,'4a7b8bd4-e7d1-4da8-982a-73362f2f85b3','9192ae05-5aaf-4831-a17f-a09e78f2c1ef')
COMMIT
DELETE FROM TCONTRACTS WHERE ID='9b6baf90-b109-4276-a2cf-c12064ca7ec3'
DELETE FROM TPROFESSIONALGROUPS WHERE ID='4a7b8bd4-e7d1-4da8-982a-73362f2f85b3'
DELETE FROM TMECHANICS WHERE ID='9192ae05-5aaf-4831-a17f-a09e78f2c1ef'
DELETE FROM TCONTRACTTYPES WHERE ID='9b71185a-33b3-4d0a-b0d7-25a802edf5d0'
COMMIT
DISCONNECT
/*C22*/SET SCHEMA PUBLIC
DISCONNECT
/*C23*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TCONTRACTTYPES VALUES('df8af46e-cb4b-4fc3-b978-950a3bc0dd6f',2.0E0,'contract-type-name',1)
INSERT INTO TMECHANICS VALUES('405f397e-b754-4509-a0f0-9d39d46e0fa9','mechanic-dni','no-name','no-surname',1)
INSERT INTO TPROFESSIONALGROUPS VALUES('e74990ae-b33e-4e94-80ac-0e1d5ddd7c5b','professional-group-name',10.0E0,300.0E0,1)
INSERT INTO TCONTRACTS VALUES('118de166-cbba-428a-8311-446a9be3bf7e',3000.0E0,'2022-11-30',0.0E0,'2022-11-20','IN_FORCE',1,'df8af46e-cb4b-4fc3-b978-950a3bc0dd6f',NULL,'e74990ae-b33e-4e94-80ac-0e1d5ddd7c5b','405f397e-b754-4509-a0f0-9d39d46e0fa9')
COMMIT
DELETE FROM TCONTRACTS WHERE ID='118de166-cbba-428a-8311-446a9be3bf7e'
DELETE FROM TPROFESSIONALGROUPS WHERE ID='e74990ae-b33e-4e94-80ac-0e1d5ddd7c5b'
DELETE FROM TMECHANICS WHERE ID='405f397e-b754-4509-a0f0-9d39d46e0fa9'
DELETE FROM TCONTRACTTYPES WHERE ID='df8af46e-cb4b-4fc3-b978-950a3bc0dd6f'
COMMIT
DISCONNECT
/*C24*/SET SCHEMA PUBLIC
DISCONNECT
/*C25*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TCONTRACTTYPES VALUES('d13710af-dffe-4f3a-bac1-334e1e6a1693',2.0E0,'contract-type-name',1)
INSERT INTO TMECHANICS VALUES('44cc5a43-dc9b-40e1-bf43-333367bdf6a8','mechanic-dni','no-name','no-surname',1)
INSERT INTO TPROFESSIONALGROUPS VALUES('bdde8000-6e4b-45fa-9d9f-cf34e64a23a3','professional-group-name',10.0E0,300.0E0,1)
INSERT INTO TCONTRACTS VALUES('7ee26caa-c510-459b-bdb5-bcefcc124572',3000.0E0,'2022-11-30',0.0E0,'2022-11-20','IN_FORCE',1,'d13710af-dffe-4f3a-bac1-334e1e6a1693',NULL,'bdde8000-6e4b-45fa-9d9f-cf34e64a23a3','44cc5a43-dc9b-40e1-bf43-333367bdf6a8')
COMMIT
DELETE FROM TCONTRACTS WHERE ID='7ee26caa-c510-459b-bdb5-bcefcc124572'
DELETE FROM TPROFESSIONALGROUPS WHERE ID='bdde8000-6e4b-45fa-9d9f-cf34e64a23a3'
DELETE FROM TMECHANICS WHERE ID='44cc5a43-dc9b-40e1-bf43-333367bdf6a8'
DELETE FROM TCONTRACTTYPES WHERE ID='d13710af-dffe-4f3a-bac1-334e1e6a1693'
COMMIT
DISCONNECT
/*C26*/SET SCHEMA PUBLIC
DISCONNECT
/*C27*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TCONTRACTTYPES VALUES('2fdd15dd-20c9-4855-b811-cbc1500ffeff',2.0E0,'contract-type-name',1)
INSERT INTO TMECHANICS VALUES('908fb484-de0e-4302-8f31-61f33d53cbb6','mechanic-dni','no-name','no-surname',1)
INSERT INTO TPROFESSIONALGROUPS VALUES('89af24b2-43b5-464f-aac5-d0b96d5b5a08','professional-group-name',10.0E0,300.0E0,1)
INSERT INTO TCONTRACTS VALUES('529c5196-09b4-46e9-aa29-a1622b563af9',3000.0E0,'2022-11-30',0.0E0,'2022-11-20','IN_FORCE',1,'2fdd15dd-20c9-4855-b811-cbc1500ffeff',NULL,'89af24b2-43b5-464f-aac5-d0b96d5b5a08','908fb484-de0e-4302-8f31-61f33d53cbb6')
COMMIT
DELETE FROM TCONTRACTS WHERE ID='529c5196-09b4-46e9-aa29-a1622b563af9'
DELETE FROM TPROFESSIONALGROUPS WHERE ID='89af24b2-43b5-464f-aac5-d0b96d5b5a08'
DELETE FROM TMECHANICS WHERE ID='908fb484-de0e-4302-8f31-61f33d53cbb6'
DELETE FROM TCONTRACTTYPES WHERE ID='2fdd15dd-20c9-4855-b811-cbc1500ffeff'
COMMIT
DISCONNECT
/*C28*/SET SCHEMA PUBLIC
DISCONNECT
/*C29*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TCONTRACTTYPES VALUES('eef77db9-42b1-4007-a1ec-49ef2baab9ae',2.0E0,'contract-type-name',1)
INSERT INTO TMECHANICS VALUES('2afb515b-762d-4692-996c-d317765a7037','mechanic-dni','no-name','no-surname',1)
INSERT INTO TPROFESSIONALGROUPS VALUES('63452629-953c-4e10-9ba1-fbc2b9ba4f64','professional-group-name',10.0E0,300.0E0,1)
INSERT INTO TCONTRACTS VALUES('14c03c0c-6e17-4fff-bc2b-47a1a3d48c80',3000.0E0,'2022-11-30',0.0E0,'2022-11-20','IN_FORCE',1,'eef77db9-42b1-4007-a1ec-49ef2baab9ae',NULL,'63452629-953c-4e10-9ba1-fbc2b9ba4f64','2afb515b-762d-4692-996c-d317765a7037')
COMMIT
DELETE FROM TCONTRACTS WHERE ID='14c03c0c-6e17-4fff-bc2b-47a1a3d48c80'
DELETE FROM TPROFESSIONALGROUPS WHERE ID='63452629-953c-4e10-9ba1-fbc2b9ba4f64'
DELETE FROM TMECHANICS WHERE ID='2afb515b-762d-4692-996c-d317765a7037'
DELETE FROM TCONTRACTTYPES WHERE ID='eef77db9-42b1-4007-a1ec-49ef2baab9ae'
COMMIT
DISCONNECT
/*C30*/SET SCHEMA PUBLIC
DISCONNECT
/*C31*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TCONTRACTTYPES VALUES('dc0c67c8-fe83-4243-96ba-6137cde07ddf',2.0E0,'contract-type-name',1)
INSERT INTO TMECHANICS VALUES('74657e99-6d06-4782-b978-2ca3d5f1b4ee','mechanic-dni','no-name','no-surname',1)
INSERT INTO TPROFESSIONALGROUPS VALUES('6889a698-293f-4372-a63d-30499287d4fe','professional-group-name',10.0E0,300.0E0,1)
INSERT INTO TCONTRACTS VALUES('1b296d6d-2c51-44d6-b8fd-2dbe72b7b560',3000.0E0,'2022-11-30',0.0E0,'2022-11-20','IN_FORCE',1,'dc0c67c8-fe83-4243-96ba-6137cde07ddf',NULL,'6889a698-293f-4372-a63d-30499287d4fe','74657e99-6d06-4782-b978-2ca3d5f1b4ee')
COMMIT
DELETE FROM TCONTRACTS WHERE ID='1b296d6d-2c51-44d6-b8fd-2dbe72b7b560'
DELETE FROM TPROFESSIONALGROUPS WHERE ID='6889a698-293f-4372-a63d-30499287d4fe'
DELETE FROM TMECHANICS WHERE ID='74657e99-6d06-4782-b978-2ca3d5f1b4ee'
DELETE FROM TCONTRACTTYPES WHERE ID='dc0c67c8-fe83-4243-96ba-6137cde07ddf'
COMMIT
DISCONNECT
/*C32*/SET SCHEMA PUBLIC
DISCONNECT
/*C33*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TCONTRACTTYPES VALUES('810bfdf2-1611-4df3-bde0-fa34ca68ef19',2.0E0,'contract-type-name',1)
INSERT INTO TMECHANICS VALUES('f47463fc-67e3-4078-a72d-178c3495917c','mechanic-dni','no-name','no-surname',1)
INSERT INTO TPROFESSIONALGROUPS VALUES('af87a141-6c65-4b9b-98d2-f90d8b69a339','professional-group-name',10.0E0,300.0E0,1)
INSERT INTO TCONTRACTS VALUES('fd7a2915-7a63-4d39-86b2-ea4f7ff2c238',3000.0E0,'2022-11-30',0.0E0,'2022-11-20','IN_FORCE',1,'810bfdf2-1611-4df3-bde0-fa34ca68ef19',NULL,'af87a141-6c65-4b9b-98d2-f90d8b69a339','f47463fc-67e3-4078-a72d-178c3495917c')
COMMIT
DELETE FROM TCONTRACTS WHERE ID='fd7a2915-7a63-4d39-86b2-ea4f7ff2c238'
DELETE FROM TPROFESSIONALGROUPS WHERE ID='af87a141-6c65-4b9b-98d2-f90d8b69a339'
DELETE FROM TMECHANICS WHERE ID='f47463fc-67e3-4078-a72d-178c3495917c'
DELETE FROM TCONTRACTTYPES WHERE ID='810bfdf2-1611-4df3-bde0-fa34ca68ef19'
COMMIT
DISCONNECT
/*C34*/SET SCHEMA PUBLIC
DISCONNECT
/*C35*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TCONTRACTTYPES VALUES('dcdb4111-c084-4380-9c4d-20bcb6fe40a9',2.0E0,'contract-type-name',1)
INSERT INTO TMECHANICS VALUES('01895de7-5e8d-448d-a8a9-84c9976a4cd7','mechanic-dni','no-name','no-surname',1)
INSERT INTO TPROFESSIONALGROUPS VALUES('be248a85-9d61-4098-bc4c-9939cc5ef488','professional-group-name',10.0E0,300.0E0,1)
INSERT INTO TCONTRACTS VALUES('b79f96b5-a513-4c3c-9326-69c4628e18b1',3000.0E0,'2022-11-30',0.0E0,'2022-11-20','IN_FORCE',1,'dcdb4111-c084-4380-9c4d-20bcb6fe40a9',NULL,'be248a85-9d61-4098-bc4c-9939cc5ef488','01895de7-5e8d-448d-a8a9-84c9976a4cd7')
COMMIT
DELETE FROM TCONTRACTS WHERE ID='b79f96b5-a513-4c3c-9326-69c4628e18b1'
DELETE FROM TPROFESSIONALGROUPS WHERE ID='be248a85-9d61-4098-bc4c-9939cc5ef488'
DELETE FROM TMECHANICS WHERE ID='01895de7-5e8d-448d-a8a9-84c9976a4cd7'
DELETE FROM TCONTRACTTYPES WHERE ID='dcdb4111-c084-4380-9c4d-20bcb6fe40a9'
COMMIT
DISCONNECT
/*C36*/SET SCHEMA PUBLIC
DISCONNECT
/*C37*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TCONTRACTTYPES VALUES('eb82a622-fc22-44f0-9840-8a7e51ed1d14',2.0E0,'contract-type-name',1)
INSERT INTO TMECHANICS VALUES('a14fa036-c86b-48ca-a8ca-c368eaab0049','mechanic-dni','no-name','no-surname',1)
INSERT INTO TPROFESSIONALGROUPS VALUES('8b34811f-7509-4c16-b34b-f00e4f3e66dd','professional-group-name',10.0E0,300.0E0,1)
INSERT INTO TCONTRACTS VALUES('8a2d5c35-a260-4c8c-a952-95c03a5b010f',3000.0E0,'2022-11-30',0.0E0,'2022-11-20','IN_FORCE',1,'eb82a622-fc22-44f0-9840-8a7e51ed1d14',NULL,'8b34811f-7509-4c16-b34b-f00e4f3e66dd','a14fa036-c86b-48ca-a8ca-c368eaab0049')
INSERT INTO TPAYROLLS VALUES('1967d37c-4b81-4250-aae8-dfdd971c3b82',0.0E0,'2022-11-20',40.72E0,214.29E0,12.5E0,0.0E0,0.0E0,1,'8a2d5c35-a260-4c8c-a952-95c03a5b010f')
COMMIT
DELETE FROM TPAYROLLS WHERE ID='1967d37c-4b81-4250-aae8-dfdd971c3b82'
DELETE FROM TCONTRACTS WHERE ID='8a2d5c35-a260-4c8c-a952-95c03a5b010f'
DELETE FROM TPROFESSIONALGROUPS WHERE ID='8b34811f-7509-4c16-b34b-f00e4f3e66dd'
DELETE FROM TMECHANICS WHERE ID='a14fa036-c86b-48ca-a8ca-c368eaab0049'
DELETE FROM TCONTRACTTYPES WHERE ID='eb82a622-fc22-44f0-9840-8a7e51ed1d14'
COMMIT
DISCONNECT
/*C38*/SET SCHEMA PUBLIC
DISCONNECT
/*C39*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TCONTRACTTYPES VALUES('a7130cc1-6754-42fa-94b2-08f7e01a0c49',2.0E0,'contract-type-name',1)
INSERT INTO TMECHANICS VALUES('8afd925e-f856-453a-a453-bac2174ee6a0','mechanic-dni','no-name','no-surname',1)
INSERT INTO TPROFESSIONALGROUPS VALUES('e98d99c8-0d87-45d2-9aa7-7b56456f1a38','professional-group-name',10.0E0,300.0E0,1)
INSERT INTO TCONTRACTS VALUES('0309033f-27af-49c8-b602-9d57a50904aa',3000.0E0,'2022-11-30',0.0E0,'2022-11-20','IN_FORCE',1,'a7130cc1-6754-42fa-94b2-08f7e01a0c49',NULL,'e98d99c8-0d87-45d2-9aa7-7b56456f1a38','8afd925e-f856-453a-a453-bac2174ee6a0')
INSERT INTO TPAYROLLS VALUES('607470f5-eea0-4752-9fdf-dcbdac085d09',0.0E0,'2022-11-20',40.72E0,214.29E0,12.5E0,0.0E0,0.0E0,1,'0309033f-27af-49c8-b602-9d57a50904aa')
COMMIT
DELETE FROM TPAYROLLS WHERE ID='607470f5-eea0-4752-9fdf-dcbdac085d09'
DELETE FROM TCONTRACTS WHERE ID='0309033f-27af-49c8-b602-9d57a50904aa'
DELETE FROM TPROFESSIONALGROUPS WHERE ID='e98d99c8-0d87-45d2-9aa7-7b56456f1a38'
DELETE FROM TMECHANICS WHERE ID='8afd925e-f856-453a-a453-bac2174ee6a0'
DELETE FROM TCONTRACTTYPES WHERE ID='a7130cc1-6754-42fa-94b2-08f7e01a0c49'
COMMIT
DISCONNECT
/*C40*/SET SCHEMA PUBLIC
DISCONNECT
/*C41*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TINVOICES VALUES('b03becf8-fe0e-4839-9ac3-b7bdbbad065d',0.0E0,'2022-11-20',1,'NOT_YET_PAID',0.21E0,1)
INSERT INTO TMECHANICS VALUES('1e3a2b04-b557-4824-bb72-4ff434e33701','mechanic-dni','no-name','no-surname',1)
INSERT INTO TVEHICLES VALUES('70015a78-79e8-49e9-8154-c911442e55c5','make','model','plate-1010',1,NULL,NULL)
INSERT INTO TWORKORDERS VALUES('99b447de-91f7-4dff-813a-0ef15d974be6',0.0E0,'2022-11-20 22:49:59.281000','no-description','INVOICED',1,'b03becf8-fe0e-4839-9ac3-b7bdbbad065d',NULL,'70015a78-79e8-49e9-8154-c911442e55c5')
COMMIT
DELETE FROM TWORKORDERS WHERE ID='99b447de-91f7-4dff-813a-0ef15d974be6'
DELETE FROM TVEHICLES WHERE ID='70015a78-79e8-49e9-8154-c911442e55c5'
DELETE FROM TMECHANICS WHERE ID='1e3a2b04-b557-4824-bb72-4ff434e33701'
DELETE FROM TINVOICES WHERE ID='b03becf8-fe0e-4839-9ac3-b7bdbbad065d'
COMMIT
DISCONNECT
/*C42*/SET SCHEMA PUBLIC
DISCONNECT
/*C43*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TINVOICES VALUES('9339159e-731c-4b1d-9843-d65f094aa750',0.0E0,'2022-11-20',1,'NOT_YET_PAID',0.21E0,1)
INSERT INTO TMECHANICS VALUES('2d731571-3384-43e2-be93-0e07eff18cd7','mechanic-dni','no-name','no-surname',1)
INSERT INTO TVEHICLES VALUES('c53931b7-dd44-4d53-a7be-416f5ae1f8da','make','model','plate-1010',1,NULL,NULL)
INSERT INTO TWORKORDERS VALUES('205300ac-903b-492c-8a45-fd843c049387',0.0E0,'2022-11-20 22:50:00.009000','no-description','INVOICED',1,'9339159e-731c-4b1d-9843-d65f094aa750',NULL,'c53931b7-dd44-4d53-a7be-416f5ae1f8da')
COMMIT
DELETE FROM TWORKORDERS WHERE ID='205300ac-903b-492c-8a45-fd843c049387'
DELETE FROM TVEHICLES WHERE ID='c53931b7-dd44-4d53-a7be-416f5ae1f8da'
DELETE FROM TMECHANICS WHERE ID='2d731571-3384-43e2-be93-0e07eff18cd7'
DELETE FROM TINVOICES WHERE ID='9339159e-731c-4b1d-9843-d65f094aa750'
COMMIT
DISCONNECT
/*C44*/SET SCHEMA PUBLIC
DISCONNECT
/*C45*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TVEHICLES VALUES('6ab4f015-d3de-4276-8e49-ba7e8ec31929','make','model','plate-1010',1,NULL,NULL)
INSERT INTO TWORKORDERS VALUES('94a08cbe-f3f0-4457-989a-430511d6f7df',0.0E0,'2022-11-20 22:50:00.538000','no-description','OPEN',1,NULL,NULL,'6ab4f015-d3de-4276-8e49-ba7e8ec31929')
COMMIT
DELETE FROM TWORKORDERS WHERE ID='94a08cbe-f3f0-4457-989a-430511d6f7df'
DELETE FROM TVEHICLES WHERE ID='6ab4f015-d3de-4276-8e49-ba7e8ec31929'
COMMIT
DISCONNECT
/*C46*/SET SCHEMA PUBLIC
DISCONNECT
/*C47*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TVEHICLES VALUES('2a47ed32-184a-4e99-bce9-70888c9e378a','make','model','plate-1010',1,NULL,NULL)
INSERT INTO TWORKORDERS VALUES('3a52b6f3-efa5-4fd5-af37-98bf40497749',0.0E0,'2022-11-20 22:50:01.002000','no-description','OPEN',1,NULL,NULL,'2a47ed32-184a-4e99-bce9-70888c9e378a')
COMMIT
DELETE FROM TWORKORDERS WHERE ID='3a52b6f3-efa5-4fd5-af37-98bf40497749'
DELETE FROM TVEHICLES WHERE ID='2a47ed32-184a-4e99-bce9-70888c9e378a'
COMMIT
DISCONNECT
/*C48*/SET SCHEMA PUBLIC
DISCONNECT
/*C49*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TCLIENTS VALUES('3ae7f869-2dbd-4d2d-93bb-0b3552e73437','dni','no-email','no-name','no-phone','no-surname',1,'no-city','no-street','no-zip')
INSERT INTO TPAYMENTMEANS VALUES('5504edec-f6f4-4ca0-a029-a15f0e1f7abe','Cash',0.0E0,1,'3ae7f869-2dbd-4d2d-93bb-0b3552e73437')
INSERT INTO TINVOICES VALUES('88843303-b9c4-42f8-a7df-671d50886ae4',0.0E0,'2022-11-20',1,'NOT_YET_PAID',0.0E0,1)
INSERT INTO TPAYMENTMEANS VALUES('d3cbcaf8-2672-416e-a7f6-eb2284545f72','CreditCard',0.0E0,1,'3ae7f869-2dbd-4d2d-93bb-0b3552e73437')
INSERT INTO TPAYMENTMEANS VALUES('de386368-0ef0-44d7-a3b5-37e1e554cf4e','Voucher',0.0E0,1,'3ae7f869-2dbd-4d2d-93bb-0b3552e73437')
INSERT INTO TCHARGES VALUES('1368e732-ca76-4b93-adbe-6889d5809b28',0.0E0,1,'88843303-b9c4-42f8-a7df-671d50886ae4','5504edec-f6f4-4ca0-a029-a15f0e1f7abe')
INSERT INTO TCHARGES VALUES('6527f658-7d5f-48d7-b2a7-6c38bed1316e',0.0E0,1,'88843303-b9c4-42f8-a7df-671d50886ae4','de386368-0ef0-44d7-a3b5-37e1e554cf4e')
INSERT INTO TCHARGES VALUES('7248cdc7-9da5-4dbe-9d92-31e78592b503',0.0E0,1,'88843303-b9c4-42f8-a7df-671d50886ae4','d3cbcaf8-2672-416e-a7f6-eb2284545f72')
INSERT INTO TCASHES VALUES('5504edec-f6f4-4ca0-a029-a15f0e1f7abe')
INSERT INTO TCREDITCARDS VALUES('d3cbcaf8-2672-416e-a7f6-eb2284545f72','1234-5678','visa','2022-12-20')
INSERT INTO TVOUCHERS VALUES('de386368-0ef0-44d7-a3b5-37e1e554cf4e',100.0E0,'code','a voucher')
COMMIT
DELETE FROM TCHARGES WHERE ID='1368e732-ca76-4b93-adbe-6889d5809b28'
DELETE FROM TCHARGES WHERE ID='6527f658-7d5f-48d7-b2a7-6c38bed1316e'
DELETE FROM TCHARGES WHERE ID='7248cdc7-9da5-4dbe-9d92-31e78592b503'
DELETE FROM TVOUCHERS WHERE ID='de386368-0ef0-44d7-a3b5-37e1e554cf4e'
DELETE FROM TPAYMENTMEANS WHERE ID='de386368-0ef0-44d7-a3b5-37e1e554cf4e'
DELETE FROM TCREDITCARDS WHERE ID='d3cbcaf8-2672-416e-a7f6-eb2284545f72'
DELETE FROM TPAYMENTMEANS WHERE ID='d3cbcaf8-2672-416e-a7f6-eb2284545f72'
DELETE FROM TINVOICES WHERE ID='88843303-b9c4-42f8-a7df-671d50886ae4'
DELETE FROM TCASHES WHERE ID='5504edec-f6f4-4ca0-a029-a15f0e1f7abe'
DELETE FROM TPAYMENTMEANS WHERE ID='5504edec-f6f4-4ca0-a029-a15f0e1f7abe'
DELETE FROM TCLIENTS WHERE ID='3ae7f869-2dbd-4d2d-93bb-0b3552e73437'
COMMIT
DISCONNECT
/*C50*/SET SCHEMA PUBLIC
DISCONNECT
/*C51*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TCLIENTS VALUES('244cf0dd-331b-4be2-8245-3421b07c885b','dni','no-email','no-name','no-phone','no-surname',1,'no-city','no-street','no-zip')
INSERT INTO TPAYMENTMEANS VALUES('70e5371e-179c-4eb5-b3fd-7d67fd95791a','Cash',0.0E0,1,'244cf0dd-331b-4be2-8245-3421b07c885b')
INSERT INTO TINVOICES VALUES('f87b4cbb-e9de-4431-bcea-81f22eee0c72',0.0E0,'2022-11-20',1,'NOT_YET_PAID',0.0E0,1)
INSERT INTO TPAYMENTMEANS VALUES('a9d473a9-e7d8-44a0-9bcf-adbf91687a8e','CreditCard',0.0E0,1,'244cf0dd-331b-4be2-8245-3421b07c885b')
INSERT INTO TPAYMENTMEANS VALUES('aa1f0e6d-d540-4dec-ad6e-5d42f883ed38','Voucher',0.0E0,1,'244cf0dd-331b-4be2-8245-3421b07c885b')
INSERT INTO TCHARGES VALUES('da8d9d16-895d-4a5d-993b-9a5129901a74',0.0E0,1,'f87b4cbb-e9de-4431-bcea-81f22eee0c72','a9d473a9-e7d8-44a0-9bcf-adbf91687a8e')
INSERT INTO TCHARGES VALUES('94e37530-f6e6-444d-b184-addb1c79f95a',0.0E0,1,'f87b4cbb-e9de-4431-bcea-81f22eee0c72','70e5371e-179c-4eb5-b3fd-7d67fd95791a')
INSERT INTO TCHARGES VALUES('fc34fc36-453b-4c3d-8536-8152f3874d5c',0.0E0,1,'f87b4cbb-e9de-4431-bcea-81f22eee0c72','aa1f0e6d-d540-4dec-ad6e-5d42f883ed38')
INSERT INTO TCASHES VALUES('70e5371e-179c-4eb5-b3fd-7d67fd95791a')
INSERT INTO TCREDITCARDS VALUES('a9d473a9-e7d8-44a0-9bcf-adbf91687a8e','1234-5678','visa','2022-12-20')
INSERT INTO TVOUCHERS VALUES('aa1f0e6d-d540-4dec-ad6e-5d42f883ed38',100.0E0,'code','a voucher')
COMMIT
DELETE FROM TCHARGES WHERE ID='94e37530-f6e6-444d-b184-addb1c79f95a'
DELETE FROM TCHARGES WHERE ID='da8d9d16-895d-4a5d-993b-9a5129901a74'
DELETE FROM TCHARGES WHERE ID='fc34fc36-453b-4c3d-8536-8152f3874d5c'
DELETE FROM TVOUCHERS WHERE ID='aa1f0e6d-d540-4dec-ad6e-5d42f883ed38'
DELETE FROM TPAYMENTMEANS WHERE ID='aa1f0e6d-d540-4dec-ad6e-5d42f883ed38'
DELETE FROM TCREDITCARDS WHERE ID='a9d473a9-e7d8-44a0-9bcf-adbf91687a8e'
DELETE FROM TPAYMENTMEANS WHERE ID='a9d473a9-e7d8-44a0-9bcf-adbf91687a8e'
DELETE FROM TINVOICES WHERE ID='f87b4cbb-e9de-4431-bcea-81f22eee0c72'
DELETE FROM TCASHES WHERE ID='70e5371e-179c-4eb5-b3fd-7d67fd95791a'
DELETE FROM TPAYMENTMEANS WHERE ID='70e5371e-179c-4eb5-b3fd-7d67fd95791a'
DELETE FROM TCLIENTS WHERE ID='244cf0dd-331b-4be2-8245-3421b07c885b'
COMMIT
DISCONNECT
/*C52*/SET SCHEMA PUBLIC
DISCONNECT
/*C53*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TCLIENTS VALUES('51186254-836c-4432-9536-58717902516e','dni','no-email','no-name','no-phone','no-surname',1,'no-city','no-street','no-zip')
INSERT INTO TPAYMENTMEANS VALUES('a0eaadfa-955e-41b9-88e2-6f8c0f3f71f2','Cash',0.0E0,1,'51186254-836c-4432-9536-58717902516e')
INSERT INTO TINVOICES VALUES('cb2b2ae3-a574-4998-8eef-8f21b9bff25f',0.0E0,'2022-11-20',1,'NOT_YET_PAID',0.0E0,1)
INSERT INTO TPAYMENTMEANS VALUES('c062d39f-389e-4341-8bfe-60666925d041','CreditCard',0.0E0,1,'51186254-836c-4432-9536-58717902516e')
INSERT INTO TPAYMENTMEANS VALUES('c0ad770e-d53f-426d-9aab-a8bd77b2f8f2','Voucher',0.0E0,1,'51186254-836c-4432-9536-58717902516e')
INSERT INTO TCHARGES VALUES('0fff5a52-54e1-4708-999e-62fc010478d2',0.0E0,1,'cb2b2ae3-a574-4998-8eef-8f21b9bff25f','a0eaadfa-955e-41b9-88e2-6f8c0f3f71f2')
INSERT INTO TCHARGES VALUES('67b1a380-ec9f-45f8-9709-d8ebc7842920',0.0E0,1,'cb2b2ae3-a574-4998-8eef-8f21b9bff25f','c0ad770e-d53f-426d-9aab-a8bd77b2f8f2')
INSERT INTO TCHARGES VALUES('31bd437b-cc0d-4ab7-a35b-47748ed2db6f',0.0E0,1,'cb2b2ae3-a574-4998-8eef-8f21b9bff25f','c062d39f-389e-4341-8bfe-60666925d041')
INSERT INTO TCASHES VALUES('a0eaadfa-955e-41b9-88e2-6f8c0f3f71f2')
INSERT INTO TCREDITCARDS VALUES('c062d39f-389e-4341-8bfe-60666925d041','1234-5678','visa','2022-12-20')
INSERT INTO TVOUCHERS VALUES('c0ad770e-d53f-426d-9aab-a8bd77b2f8f2',100.0E0,'code','a voucher')
COMMIT
DELETE FROM TCHARGES WHERE ID='0fff5a52-54e1-4708-999e-62fc010478d2'
DELETE FROM TCHARGES WHERE ID='31bd437b-cc0d-4ab7-a35b-47748ed2db6f'
DELETE FROM TCHARGES WHERE ID='67b1a380-ec9f-45f8-9709-d8ebc7842920'
DELETE FROM TVOUCHERS WHERE ID='c0ad770e-d53f-426d-9aab-a8bd77b2f8f2'
DELETE FROM TPAYMENTMEANS WHERE ID='c0ad770e-d53f-426d-9aab-a8bd77b2f8f2'
DELETE FROM TCREDITCARDS WHERE ID='c062d39f-389e-4341-8bfe-60666925d041'
DELETE FROM TPAYMENTMEANS WHERE ID='c062d39f-389e-4341-8bfe-60666925d041'
DELETE FROM TINVOICES WHERE ID='cb2b2ae3-a574-4998-8eef-8f21b9bff25f'
DELETE FROM TCASHES WHERE ID='a0eaadfa-955e-41b9-88e2-6f8c0f3f71f2'
DELETE FROM TPAYMENTMEANS WHERE ID='a0eaadfa-955e-41b9-88e2-6f8c0f3f71f2'
DELETE FROM TCLIENTS WHERE ID='51186254-836c-4432-9536-58717902516e'
COMMIT
DISCONNECT
/*C54*/SET SCHEMA PUBLIC
DISCONNECT
/*C55*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TCLIENTS VALUES('4059c8dd-30d4-4ce2-b698-e65bc3211f8e','dni','no-email','no-name','no-phone','no-surname',1,'no-city','no-street','no-zip')
INSERT INTO TPAYMENTMEANS VALUES('582c5535-2e17-44b6-9dd9-2e4cbf4fa8ed','Cash',0.0E0,1,'4059c8dd-30d4-4ce2-b698-e65bc3211f8e')
INSERT INTO TINVOICES VALUES('3c1cf9e7-156e-4d7f-8182-525fbd4f287e',0.0E0,'2022-11-20',1,'NOT_YET_PAID',0.0E0,1)
INSERT INTO TPAYMENTMEANS VALUES('195b49d0-ba39-47e1-bc65-bfcd35bd84f1','CreditCard',0.0E0,1,'4059c8dd-30d4-4ce2-b698-e65bc3211f8e')
INSERT INTO TPAYMENTMEANS VALUES('f5a88a76-f2e4-46db-9adf-fe7f325f3e03','Voucher',0.0E0,1,'4059c8dd-30d4-4ce2-b698-e65bc3211f8e')
INSERT INTO TCHARGES VALUES('4fbde093-e343-4f4d-a9fd-91418928f462',0.0E0,1,'3c1cf9e7-156e-4d7f-8182-525fbd4f287e','195b49d0-ba39-47e1-bc65-bfcd35bd84f1')
INSERT INTO TCHARGES VALUES('4b9a1919-0f7f-479c-8894-23174953e4cf',0.0E0,1,'3c1cf9e7-156e-4d7f-8182-525fbd4f287e','f5a88a76-f2e4-46db-9adf-fe7f325f3e03')
INSERT INTO TCHARGES VALUES('798fb7a9-56c6-41bb-b9c3-aaafce20fd43',0.0E0,1,'3c1cf9e7-156e-4d7f-8182-525fbd4f287e','582c5535-2e17-44b6-9dd9-2e4cbf4fa8ed')
INSERT INTO TCASHES VALUES('582c5535-2e17-44b6-9dd9-2e4cbf4fa8ed')
INSERT INTO TCREDITCARDS VALUES('195b49d0-ba39-47e1-bc65-bfcd35bd84f1','1234-5678','visa','2022-12-20')
INSERT INTO TVOUCHERS VALUES('f5a88a76-f2e4-46db-9adf-fe7f325f3e03',100.0E0,'code','a voucher')
COMMIT
DELETE FROM TCHARGES WHERE ID='4b9a1919-0f7f-479c-8894-23174953e4cf'
DELETE FROM TCHARGES WHERE ID='4fbde093-e343-4f4d-a9fd-91418928f462'
DELETE FROM TCHARGES WHERE ID='798fb7a9-56c6-41bb-b9c3-aaafce20fd43'
DELETE FROM TVOUCHERS WHERE ID='f5a88a76-f2e4-46db-9adf-fe7f325f3e03'
DELETE FROM TPAYMENTMEANS WHERE ID='f5a88a76-f2e4-46db-9adf-fe7f325f3e03'
DELETE FROM TCREDITCARDS WHERE ID='195b49d0-ba39-47e1-bc65-bfcd35bd84f1'
DELETE FROM TPAYMENTMEANS WHERE ID='195b49d0-ba39-47e1-bc65-bfcd35bd84f1'
DELETE FROM TINVOICES WHERE ID='3c1cf9e7-156e-4d7f-8182-525fbd4f287e'
DELETE FROM TCASHES WHERE ID='582c5535-2e17-44b6-9dd9-2e4cbf4fa8ed'
DELETE FROM TPAYMENTMEANS WHERE ID='582c5535-2e17-44b6-9dd9-2e4cbf4fa8ed'
DELETE FROM TCLIENTS WHERE ID='4059c8dd-30d4-4ce2-b698-e65bc3211f8e'
COMMIT
DISCONNECT
/*C56*/SET SCHEMA PUBLIC
DISCONNECT
/*C57*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TCLIENTS VALUES('21750d89-7511-4a42-84fb-fb7edbf7ad70','dni','no-email','no-name','no-phone','no-surname',1,'no-city','no-street','no-zip')
INSERT INTO TPAYMENTMEANS VALUES('3df17a2c-0364-42af-9f83-2cc7c6b0bf27','Cash',0.0E0,1,'21750d89-7511-4a42-84fb-fb7edbf7ad70')
INSERT INTO TINVOICES VALUES('8b4ab997-5fd7-4d25-8d04-479e89b4660c',0.0E0,'2022-11-20',1,'NOT_YET_PAID',0.0E0,1)
INSERT INTO TPAYMENTMEANS VALUES('d57c382e-2abd-411d-8003-dbd069e3525d','CreditCard',0.0E0,1,'21750d89-7511-4a42-84fb-fb7edbf7ad70')
INSERT INTO TPAYMENTMEANS VALUES('4779c06e-7279-4d43-941c-0eb996669f8a','Voucher',0.0E0,1,'21750d89-7511-4a42-84fb-fb7edbf7ad70')
INSERT INTO TCHARGES VALUES('a38c64ab-ff9d-4445-bb72-589596899dc3',0.0E0,1,'8b4ab997-5fd7-4d25-8d04-479e89b4660c','d57c382e-2abd-411d-8003-dbd069e3525d')
INSERT INTO TCHARGES VALUES('aa231e15-c28f-4d96-903f-d05444d38ff2',0.0E0,1,'8b4ab997-5fd7-4d25-8d04-479e89b4660c','4779c06e-7279-4d43-941c-0eb996669f8a')
INSERT INTO TCHARGES VALUES('d4f6c77b-5734-4d18-952e-d60ecd805df9',0.0E0,1,'8b4ab997-5fd7-4d25-8d04-479e89b4660c','3df17a2c-0364-42af-9f83-2cc7c6b0bf27')
INSERT INTO TCASHES VALUES('3df17a2c-0364-42af-9f83-2cc7c6b0bf27')
INSERT INTO TCREDITCARDS VALUES('d57c382e-2abd-411d-8003-dbd069e3525d','1234-5678','visa','2022-12-20')
INSERT INTO TVOUCHERS VALUES('4779c06e-7279-4d43-941c-0eb996669f8a',100.0E0,'code','a voucher')
COMMIT
DELETE FROM TCHARGES WHERE ID='a38c64ab-ff9d-4445-bb72-589596899dc3'
DELETE FROM TCHARGES WHERE ID='aa231e15-c28f-4d96-903f-d05444d38ff2'
DELETE FROM TCHARGES WHERE ID='d4f6c77b-5734-4d18-952e-d60ecd805df9'
DELETE FROM TVOUCHERS WHERE ID='4779c06e-7279-4d43-941c-0eb996669f8a'
DELETE FROM TPAYMENTMEANS WHERE ID='4779c06e-7279-4d43-941c-0eb996669f8a'
DELETE FROM TCREDITCARDS WHERE ID='d57c382e-2abd-411d-8003-dbd069e3525d'
DELETE FROM TPAYMENTMEANS WHERE ID='d57c382e-2abd-411d-8003-dbd069e3525d'
DELETE FROM TINVOICES WHERE ID='8b4ab997-5fd7-4d25-8d04-479e89b4660c'
DELETE FROM TCASHES WHERE ID='3df17a2c-0364-42af-9f83-2cc7c6b0bf27'
DELETE FROM TPAYMENTMEANS WHERE ID='3df17a2c-0364-42af-9f83-2cc7c6b0bf27'
DELETE FROM TCLIENTS WHERE ID='21750d89-7511-4a42-84fb-fb7edbf7ad70'
COMMIT
DISCONNECT
/*C58*/SET SCHEMA PUBLIC
DISCONNECT
/*C59*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TCLIENTS VALUES('2c7f3100-b81f-4d5f-ac95-fd103653cf37','dni','no-email','no-name','no-phone','no-surname',1,'no-city','no-street','no-zip')
INSERT INTO TPAYMENTMEANS VALUES('335ed102-1379-4d7a-813e-189437dc9070','Cash',0.0E0,1,'2c7f3100-b81f-4d5f-ac95-fd103653cf37')
INSERT INTO TINVOICES VALUES('acfbce3b-1b8d-43a5-940b-a6f361412d8f',0.0E0,'2022-11-20',1,'NOT_YET_PAID',0.0E0,1)
INSERT INTO TPAYMENTMEANS VALUES('2ffc0d4d-def3-4024-ad4a-a7fec552bf84','CreditCard',0.0E0,1,'2c7f3100-b81f-4d5f-ac95-fd103653cf37')
INSERT INTO TPAYMENTMEANS VALUES('1d24c3ca-f894-4eb4-a9ec-c467a5ef1ceb','Voucher',0.0E0,1,'2c7f3100-b81f-4d5f-ac95-fd103653cf37')
INSERT INTO TCHARGES VALUES('248648db-407b-44c1-b9a6-859c9ba2be07',0.0E0,1,'acfbce3b-1b8d-43a5-940b-a6f361412d8f','335ed102-1379-4d7a-813e-189437dc9070')
INSERT INTO TCHARGES VALUES('682d844f-88d6-42a6-89b4-a0e9bad47137',0.0E0,1,'acfbce3b-1b8d-43a5-940b-a6f361412d8f','2ffc0d4d-def3-4024-ad4a-a7fec552bf84')
INSERT INTO TCHARGES VALUES('f49f1b78-ce6f-42fa-b850-b4b491f0ccbc',0.0E0,1,'acfbce3b-1b8d-43a5-940b-a6f361412d8f','1d24c3ca-f894-4eb4-a9ec-c467a5ef1ceb')
INSERT INTO TCASHES VALUES('335ed102-1379-4d7a-813e-189437dc9070')
INSERT INTO TCREDITCARDS VALUES('2ffc0d4d-def3-4024-ad4a-a7fec552bf84','1234-5678','visa','2022-12-20')
INSERT INTO TVOUCHERS VALUES('1d24c3ca-f894-4eb4-a9ec-c467a5ef1ceb',100.0E0,'code','a voucher')
COMMIT
DELETE FROM TCHARGES WHERE ID='248648db-407b-44c1-b9a6-859c9ba2be07'
DELETE FROM TCHARGES WHERE ID='682d844f-88d6-42a6-89b4-a0e9bad47137'
DELETE FROM TCHARGES WHERE ID='f49f1b78-ce6f-42fa-b850-b4b491f0ccbc'
DELETE FROM TVOUCHERS WHERE ID='1d24c3ca-f894-4eb4-a9ec-c467a5ef1ceb'
DELETE FROM TPAYMENTMEANS WHERE ID='1d24c3ca-f894-4eb4-a9ec-c467a5ef1ceb'
DELETE FROM TCREDITCARDS WHERE ID='2ffc0d4d-def3-4024-ad4a-a7fec552bf84'
DELETE FROM TPAYMENTMEANS WHERE ID='2ffc0d4d-def3-4024-ad4a-a7fec552bf84'
DELETE FROM TINVOICES WHERE ID='acfbce3b-1b8d-43a5-940b-a6f361412d8f'
DELETE FROM TCASHES WHERE ID='335ed102-1379-4d7a-813e-189437dc9070'
DELETE FROM TPAYMENTMEANS WHERE ID='335ed102-1379-4d7a-813e-189437dc9070'
DELETE FROM TCLIENTS WHERE ID='2c7f3100-b81f-4d5f-ac95-fd103653cf37'
COMMIT
DISCONNECT
/*C60*/SET SCHEMA PUBLIC
DISCONNECT
/*C61*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TCLIENTS VALUES('f226b162-c363-4793-b2cc-5ba2d0172115','dni','no-email','no-name','no-phone','no-surname',1,'no-city','no-street','no-zip')
INSERT INTO TPAYMENTMEANS VALUES('38793513-ea4c-4a95-8864-bd742d9c1679','Cash',0.0E0,1,'f226b162-c363-4793-b2cc-5ba2d0172115')
INSERT INTO TINVOICES VALUES('01b1eceb-203b-4b85-857f-cbe049bb03ef',0.0E0,'2022-11-20',1,'NOT_YET_PAID',0.0E0,1)
INSERT INTO TPAYMENTMEANS VALUES('58fed163-b8e7-44b1-b3ba-143a8624a4af','CreditCard',0.0E0,1,'f226b162-c363-4793-b2cc-5ba2d0172115')
INSERT INTO TPAYMENTMEANS VALUES('e9f587f4-7fdd-45e1-87db-a3241cbadaa1','Voucher',0.0E0,1,'f226b162-c363-4793-b2cc-5ba2d0172115')
INSERT INTO TCHARGES VALUES('a3a30a20-3736-403e-a4f1-b35409fa5906',0.0E0,1,'01b1eceb-203b-4b85-857f-cbe049bb03ef','58fed163-b8e7-44b1-b3ba-143a8624a4af')
INSERT INTO TCHARGES VALUES('3034abd5-0a61-4932-9cc1-a1a693bc3fac',0.0E0,1,'01b1eceb-203b-4b85-857f-cbe049bb03ef','38793513-ea4c-4a95-8864-bd742d9c1679')
INSERT INTO TCHARGES VALUES('fff054ab-0bf0-43fb-89b0-dd12ffed6cfc',0.0E0,1,'01b1eceb-203b-4b85-857f-cbe049bb03ef','e9f587f4-7fdd-45e1-87db-a3241cbadaa1')
INSERT INTO TCASHES VALUES('38793513-ea4c-4a95-8864-bd742d9c1679')
INSERT INTO TCREDITCARDS VALUES('58fed163-b8e7-44b1-b3ba-143a8624a4af','1234-5678','visa','2022-12-20')
INSERT INTO TVOUCHERS VALUES('e9f587f4-7fdd-45e1-87db-a3241cbadaa1',100.0E0,'code','a voucher')
COMMIT
DELETE FROM TCHARGES WHERE ID='3034abd5-0a61-4932-9cc1-a1a693bc3fac'
DELETE FROM TCHARGES WHERE ID='a3a30a20-3736-403e-a4f1-b35409fa5906'
DELETE FROM TCHARGES WHERE ID='fff054ab-0bf0-43fb-89b0-dd12ffed6cfc'
DELETE FROM TVOUCHERS WHERE ID='e9f587f4-7fdd-45e1-87db-a3241cbadaa1'
DELETE FROM TPAYMENTMEANS WHERE ID='e9f587f4-7fdd-45e1-87db-a3241cbadaa1'
DELETE FROM TCREDITCARDS WHERE ID='58fed163-b8e7-44b1-b3ba-143a8624a4af'
DELETE FROM TPAYMENTMEANS WHERE ID='58fed163-b8e7-44b1-b3ba-143a8624a4af'
DELETE FROM TINVOICES WHERE ID='01b1eceb-203b-4b85-857f-cbe049bb03ef'
DELETE FROM TCASHES WHERE ID='38793513-ea4c-4a95-8864-bd742d9c1679'
DELETE FROM TPAYMENTMEANS WHERE ID='38793513-ea4c-4a95-8864-bd742d9c1679'
DELETE FROM TCLIENTS WHERE ID='f226b162-c363-4793-b2cc-5ba2d0172115'
COMMIT
DISCONNECT
/*C62*/SET SCHEMA PUBLIC
DISCONNECT
/*C63*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TCLIENTS VALUES('8f14d87b-694c-4383-8747-95d82fc493a2','dni','no-email','nombre','no-phone','apellidos',1,'city','street','zipcode')
INSERT INTO TVEHICLES VALUES('051a3cde-58bf-43ff-918e-1c625f3919a4','make','model','plate-1010',1,'8f14d87b-694c-4383-8747-95d82fc493a2',NULL)
COMMIT
DELETE FROM TVEHICLES WHERE ID='051a3cde-58bf-43ff-918e-1c625f3919a4'
DELETE FROM TCLIENTS WHERE ID='8f14d87b-694c-4383-8747-95d82fc493a2'
COMMIT
DISCONNECT
/*C64*/SET SCHEMA PUBLIC
DISCONNECT
/*C65*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TCLIENTS VALUES('c3fd5ecd-cf08-4a88-9765-c49d2768f59f','dni','no-email','nombre','no-phone','apellidos',1,'city','street','zipcode')
INSERT INTO TVEHICLES VALUES('5d3416f2-e41a-444a-bbfd-153ffc69f4f9','make','model','plate-1010',1,'c3fd5ecd-cf08-4a88-9765-c49d2768f59f',NULL)
COMMIT
DELETE FROM TVEHICLES WHERE ID='5d3416f2-e41a-444a-bbfd-153ffc69f4f9'
DELETE FROM TCLIENTS WHERE ID='c3fd5ecd-cf08-4a88-9765-c49d2768f59f'
COMMIT
DISCONNECT
/*C66*/SET SCHEMA PUBLIC
DISCONNECT
/*C67*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TMECHANICS VALUES('99e7bb42-4e26-4fe2-aa64-2a3697bfb4f2','plate-1010','make','model',1)
INSERT INTO TVEHICLES VALUES('e7693840-3d98-4405-b17f-5b73329a9f9f','make','model','1234-Z',1,NULL,NULL)
INSERT INTO TWORKORDERS VALUES('c48f68d6-90e0-4880-a830-5a5dcf1459ba',0.0E0,'2022-11-20 22:50:05.311000','no-description','OPEN',1,NULL,'99e7bb42-4e26-4fe2-aa64-2a3697bfb4f2','e7693840-3d98-4405-b17f-5b73329a9f9f')
COMMIT
DELETE FROM TWORKORDERS WHERE ID='c48f68d6-90e0-4880-a830-5a5dcf1459ba'
DELETE FROM TVEHICLES WHERE ID='e7693840-3d98-4405-b17f-5b73329a9f9f'
DELETE FROM TMECHANICS WHERE ID='99e7bb42-4e26-4fe2-aa64-2a3697bfb4f2'
COMMIT
DISCONNECT
/*C68*/SET SCHEMA PUBLIC
DISCONNECT
/*C69*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TMECHANICS VALUES('c33d4ab2-3ac5-4b6e-906a-4c3dd16c601b','plate-1010','make','model',1)
INSERT INTO TVEHICLES VALUES('5a36690d-9970-4c2b-a299-68b3ac1f7ab4','make','model','1234-Z',1,NULL,NULL)
INSERT INTO TWORKORDERS VALUES('0b40167c-89f2-47cd-90cd-5f49d7b57578',0.0E0,'2022-11-20 22:50:05.692000','no-description','OPEN',1,NULL,'c33d4ab2-3ac5-4b6e-906a-4c3dd16c601b','5a36690d-9970-4c2b-a299-68b3ac1f7ab4')
COMMIT
DELETE FROM TWORKORDERS WHERE ID='0b40167c-89f2-47cd-90cd-5f49d7b57578'
DELETE FROM TVEHICLES WHERE ID='5a36690d-9970-4c2b-a299-68b3ac1f7ab4'
DELETE FROM TMECHANICS WHERE ID='c33d4ab2-3ac5-4b6e-906a-4c3dd16c601b'
COMMIT
DISCONNECT
/*C70*/SET SCHEMA PUBLIC
DISCONNECT
/*C71*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TINVOICES VALUES('472a2b37-f34e-40be-b752-df2f2f15878c',181.5E0,'2022-11-20',1,'NOT_YET_PAID',0.21E0,1)
INSERT INTO TMECHANICS VALUES('3c06e80c-455c-416a-8ef6-5b4e6eeaf8f3','mechanic-dni','no-name','no-surname',1)
INSERT INTO TVEHICLETYPES VALUES('c4d05721-0a51-4ea0-8f50-8603dae663f0','vehicle-type',50.0E0,1)
INSERT INTO TVEHICLES VALUES('c4004072-adc9-4ba2-ac1f-dc842a954d6d','make','model','plate-1010',1,NULL,'c4d05721-0a51-4ea0-8f50-8603dae663f0')
INSERT INTO TWORKORDERS VALUES('e3afc975-b1b4-40a2-ba64-47e438b6e897',150.0E0,'2022-11-20 22:50:06.104000','no-description','INVOICED',1,'472a2b37-f34e-40be-b752-df2f2f15878c',NULL,'c4004072-adc9-4ba2-ac1f-dc842a954d6d')
INSERT INTO TINTERVENTIONS VALUES('a33f2468-9e51-4689-be67-276377b92447','2022-11-20 22:50:06.104000',60,1,'3c06e80c-455c-416a-8ef6-5b4e6eeaf8f3','e3afc975-b1b4-40a2-ba64-47e438b6e897')
INSERT INTO TSPAREPARTS VALUES('e4586db3-fc68-42c1-9284-9de4f0a288c2','code','description',100.0E0,1)
INSERT INTO TSUBSTITUTIONS VALUES('276124af-b288-4a90-a6f4-39024d30a61a',1,1,'a33f2468-9e51-4689-be67-276377b92447','e4586db3-fc68-42c1-9284-9de4f0a288c2')
COMMIT
DELETE FROM TSUBSTITUTIONS WHERE ID='276124af-b288-4a90-a6f4-39024d30a61a'
DELETE FROM TSPAREPARTS WHERE ID='e4586db3-fc68-42c1-9284-9de4f0a288c2'
DELETE FROM TINTERVENTIONS WHERE ID='a33f2468-9e51-4689-be67-276377b92447'
DELETE FROM TWORKORDERS WHERE ID='e3afc975-b1b4-40a2-ba64-47e438b6e897'
DELETE FROM TVEHICLES WHERE ID='c4004072-adc9-4ba2-ac1f-dc842a954d6d'
DELETE FROM TVEHICLETYPES WHERE ID='c4d05721-0a51-4ea0-8f50-8603dae663f0'
DELETE FROM TMECHANICS WHERE ID='3c06e80c-455c-416a-8ef6-5b4e6eeaf8f3'
DELETE FROM TINVOICES WHERE ID='472a2b37-f34e-40be-b752-df2f2f15878c'
COMMIT
DISCONNECT
/*C72*/SET SCHEMA PUBLIC
DISCONNECT
/*C73*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TINVOICES VALUES('eddc48bb-8bf2-4224-a84a-827c317ae08d',181.5E0,'2022-11-20',1,'NOT_YET_PAID',0.21E0,1)
INSERT INTO TMECHANICS VALUES('e1cb13e0-7fa1-4f7f-8fc2-bc1846f4a2f0','mechanic-dni','no-name','no-surname',1)
INSERT INTO TVEHICLETYPES VALUES('bf12a50f-9c55-4cf8-b2cb-9dc57fc55331','vehicle-type',50.0E0,1)
INSERT INTO TVEHICLES VALUES('18a53c4b-4a3d-41e9-9c84-e206fb573249','make','model','plate-1010',1,NULL,'bf12a50f-9c55-4cf8-b2cb-9dc57fc55331')
INSERT INTO TWORKORDERS VALUES('3daa4d4a-b385-4b8e-bd9f-275bf450a706',150.0E0,'2022-11-20 22:50:06.494000','no-description','INVOICED',1,'eddc48bb-8bf2-4224-a84a-827c317ae08d',NULL,'18a53c4b-4a3d-41e9-9c84-e206fb573249')
INSERT INTO TINTERVENTIONS VALUES('865492cc-0bae-494a-97f0-7146ca238e68','2022-11-20 22:50:06.494000',60,1,'e1cb13e0-7fa1-4f7f-8fc2-bc1846f4a2f0','3daa4d4a-b385-4b8e-bd9f-275bf450a706')
INSERT INTO TSPAREPARTS VALUES('74f31970-2a51-4ff0-a0b5-323c06a2310d','code','description',100.0E0,1)
INSERT INTO TSUBSTITUTIONS VALUES('04b99efd-e07a-4ee7-a6a5-8718d2defba1',1,1,'865492cc-0bae-494a-97f0-7146ca238e68','74f31970-2a51-4ff0-a0b5-323c06a2310d')
COMMIT
DELETE FROM TSUBSTITUTIONS WHERE ID='04b99efd-e07a-4ee7-a6a5-8718d2defba1'
DELETE FROM TSPAREPARTS WHERE ID='74f31970-2a51-4ff0-a0b5-323c06a2310d'
DELETE FROM TINTERVENTIONS WHERE ID='865492cc-0bae-494a-97f0-7146ca238e68'
DELETE FROM TWORKORDERS WHERE ID='3daa4d4a-b385-4b8e-bd9f-275bf450a706'
DELETE FROM TVEHICLES WHERE ID='18a53c4b-4a3d-41e9-9c84-e206fb573249'
DELETE FROM TVEHICLETYPES WHERE ID='bf12a50f-9c55-4cf8-b2cb-9dc57fc55331'
DELETE FROM TMECHANICS WHERE ID='e1cb13e0-7fa1-4f7f-8fc2-bc1846f4a2f0'
DELETE FROM TINVOICES WHERE ID='eddc48bb-8bf2-4224-a84a-827c317ae08d'
COMMIT
DISCONNECT
/*C74*/SET SCHEMA PUBLIC
DISCONNECT
/*C75*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TINVOICES VALUES('c92a7945-826c-4553-ab2f-3074b4cff166',181.5E0,'2022-11-20',1,'NOT_YET_PAID',0.21E0,1)
INSERT INTO TMECHANICS VALUES('36a00085-d4f4-4fff-9ee7-b2edf3613b35','mechanic-dni','no-name','no-surname',1)
INSERT INTO TVEHICLETYPES VALUES('dcef5e47-285e-4f81-86bd-669aa5c62f34','vehicle-type',50.0E0,1)
INSERT INTO TVEHICLES VALUES('2a9aa4cc-d67d-440f-8f3c-2bd59584c221','make','model','plate-1010',1,NULL,'dcef5e47-285e-4f81-86bd-669aa5c62f34')
INSERT INTO TWORKORDERS VALUES('803820b4-1295-46de-b01f-2c5e5ae562cd',150.0E0,'2022-11-20 22:50:06.887000','no-description','INVOICED',1,'c92a7945-826c-4553-ab2f-3074b4cff166',NULL,'2a9aa4cc-d67d-440f-8f3c-2bd59584c221')
INSERT INTO TINTERVENTIONS VALUES('18f4a5db-712e-4e23-ac63-22fef3020569','2022-11-20 22:50:06.887000',60,1,'36a00085-d4f4-4fff-9ee7-b2edf3613b35','803820b4-1295-46de-b01f-2c5e5ae562cd')
INSERT INTO TSPAREPARTS VALUES('9be8edbd-46b9-4faf-8951-0e788b2b0bc9','code','description',100.0E0,1)
INSERT INTO TSUBSTITUTIONS VALUES('19cd4d27-4936-460a-804b-4e9744b0d98a',1,1,'18f4a5db-712e-4e23-ac63-22fef3020569','9be8edbd-46b9-4faf-8951-0e788b2b0bc9')
COMMIT
DELETE FROM TSUBSTITUTIONS WHERE ID='19cd4d27-4936-460a-804b-4e9744b0d98a'
DELETE FROM TSPAREPARTS WHERE ID='9be8edbd-46b9-4faf-8951-0e788b2b0bc9'
DELETE FROM TINTERVENTIONS WHERE ID='18f4a5db-712e-4e23-ac63-22fef3020569'
DELETE FROM TWORKORDERS WHERE ID='803820b4-1295-46de-b01f-2c5e5ae562cd'
DELETE FROM TVEHICLES WHERE ID='2a9aa4cc-d67d-440f-8f3c-2bd59584c221'
DELETE FROM TVEHICLETYPES WHERE ID='dcef5e47-285e-4f81-86bd-669aa5c62f34'
DELETE FROM TMECHANICS WHERE ID='36a00085-d4f4-4fff-9ee7-b2edf3613b35'
DELETE FROM TINVOICES WHERE ID='c92a7945-826c-4553-ab2f-3074b4cff166'
COMMIT
DISCONNECT
/*C76*/SET SCHEMA PUBLIC
DISCONNECT
/*C77*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TINVOICES VALUES('668a02d1-1997-4d3c-a8e2-9805c8a55244',181.5E0,'2022-11-20',1,'NOT_YET_PAID',0.21E0,1)
INSERT INTO TMECHANICS VALUES('c3de587f-e098-499e-b41e-f6600fb51995','mechanic-dni','no-name','no-surname',1)
INSERT INTO TVEHICLETYPES VALUES('2d369191-fb81-47f8-a7a6-6741eb4de2b1','vehicle-type',50.0E0,1)
INSERT INTO TVEHICLES VALUES('c2c06e77-3862-40f3-8c41-410c4079a4f7','make','model','plate-1010',1,NULL,'2d369191-fb81-47f8-a7a6-6741eb4de2b1')
INSERT INTO TWORKORDERS VALUES('49f5cbda-2715-47f1-8c52-3558a59ab754',150.0E0,'2022-11-20 22:50:07.282000','no-description','INVOICED',1,'668a02d1-1997-4d3c-a8e2-9805c8a55244',NULL,'c2c06e77-3862-40f3-8c41-410c4079a4f7')
INSERT INTO TINTERVENTIONS VALUES('6a2c7f14-7d1b-4a7e-855e-ff2ec3ee00fc','2022-11-20 22:50:07.282000',60,1,'c3de587f-e098-499e-b41e-f6600fb51995','49f5cbda-2715-47f1-8c52-3558a59ab754')
INSERT INTO TSPAREPARTS VALUES('4e25997e-e04b-4427-9143-2922fb008e5a','code','description',100.0E0,1)
INSERT INTO TSUBSTITUTIONS VALUES('e3a92c8a-faba-4686-9788-4f1e2ff45029',1,1,'6a2c7f14-7d1b-4a7e-855e-ff2ec3ee00fc','4e25997e-e04b-4427-9143-2922fb008e5a')
COMMIT
DELETE FROM TSUBSTITUTIONS WHERE ID='e3a92c8a-faba-4686-9788-4f1e2ff45029'
DELETE FROM TSPAREPARTS WHERE ID='4e25997e-e04b-4427-9143-2922fb008e5a'
DELETE FROM TINTERVENTIONS WHERE ID='6a2c7f14-7d1b-4a7e-855e-ff2ec3ee00fc'
DELETE FROM TWORKORDERS WHERE ID='49f5cbda-2715-47f1-8c52-3558a59ab754'
DELETE FROM TVEHICLES WHERE ID='c2c06e77-3862-40f3-8c41-410c4079a4f7'
DELETE FROM TVEHICLETYPES WHERE ID='2d369191-fb81-47f8-a7a6-6741eb4de2b1'
DELETE FROM TMECHANICS WHERE ID='c3de587f-e098-499e-b41e-f6600fb51995'
DELETE FROM TINVOICES WHERE ID='668a02d1-1997-4d3c-a8e2-9805c8a55244'
COMMIT
DISCONNECT
/*C78*/SET SCHEMA PUBLIC
DISCONNECT
/*C79*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TINVOICES VALUES('73d0573a-dd7f-449b-b10b-4bd164b09d86',60.5E0,'2022-11-20',1,'NOT_YET_PAID',0.21E0,1)
INSERT INTO TMECHANICS VALUES('8fe73210-e3a2-48de-93a0-f9bef8971863','mechanic-dni','no-name','no-surname',1)
INSERT INTO TVEHICLETYPES VALUES('98278932-ef94-4c64-9be3-da100aa5ed60','vehicle-type',50.0E0,1)
INSERT INTO TVEHICLES VALUES('609533e9-78e4-4b3f-a679-5fd1af7695aa','make','model','plate-1010',1,NULL,'98278932-ef94-4c64-9be3-da100aa5ed60')
INSERT INTO TWORKORDERS VALUES('083d38ce-5f15-4c8b-af0c-ac9913dc3f44',50.0E0,'2022-11-20 22:50:07.660000','no-description','INVOICED',1,'73d0573a-dd7f-449b-b10b-4bd164b09d86',NULL,'609533e9-78e4-4b3f-a679-5fd1af7695aa')
INSERT INTO TINTERVENTIONS VALUES('c1cdf4f5-63b2-4281-9ed8-b65a608a4da9','2022-11-20 22:50:07.660000',60,1,'8fe73210-e3a2-48de-93a0-f9bef8971863','083d38ce-5f15-4c8b-af0c-ac9913dc3f44')
COMMIT
DELETE FROM TINTERVENTIONS WHERE ID='c1cdf4f5-63b2-4281-9ed8-b65a608a4da9'
DELETE FROM TWORKORDERS WHERE ID='083d38ce-5f15-4c8b-af0c-ac9913dc3f44'
DELETE FROM TVEHICLES WHERE ID='609533e9-78e4-4b3f-a679-5fd1af7695aa'
DELETE FROM TVEHICLETYPES WHERE ID='98278932-ef94-4c64-9be3-da100aa5ed60'
DELETE FROM TMECHANICS WHERE ID='8fe73210-e3a2-48de-93a0-f9bef8971863'
DELETE FROM TINVOICES WHERE ID='73d0573a-dd7f-449b-b10b-4bd164b09d86'
COMMIT
DISCONNECT
/*C80*/SET SCHEMA PUBLIC
DISCONNECT
/*C81*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TINVOICES VALUES('fdc21635-7071-4ebb-949b-bf404f8db560',60.5E0,'2022-11-20',1,'NOT_YET_PAID',0.21E0,1)
INSERT INTO TMECHANICS VALUES('002ddfcd-ef9f-4fe4-92fb-2fc53961b86b','mechanic-dni','no-name','no-surname',1)
INSERT INTO TVEHICLETYPES VALUES('acd905db-1d55-4ced-8348-ab93bf487225','vehicle-type',50.0E0,1)
INSERT INTO TVEHICLES VALUES('a295cafe-2ab6-46a4-8fe7-d157cf628a7e','make','model','plate-1010',1,NULL,'acd905db-1d55-4ced-8348-ab93bf487225')
INSERT INTO TWORKORDERS VALUES('4cf88fa1-44cc-41e8-90f2-8ecff09e784f',50.0E0,'2022-11-20 22:50:08.053000','no-description','INVOICED',1,'fdc21635-7071-4ebb-949b-bf404f8db560',NULL,'a295cafe-2ab6-46a4-8fe7-d157cf628a7e')
INSERT INTO TINTERVENTIONS VALUES('412cfaf7-4cb9-4620-87a0-abbb23f170ce','2022-11-20 22:50:08.053000',60,1,'002ddfcd-ef9f-4fe4-92fb-2fc53961b86b','4cf88fa1-44cc-41e8-90f2-8ecff09e784f')
COMMIT
DELETE FROM TINTERVENTIONS WHERE ID='412cfaf7-4cb9-4620-87a0-abbb23f170ce'
DELETE FROM TWORKORDERS WHERE ID='4cf88fa1-44cc-41e8-90f2-8ecff09e784f'
DELETE FROM TVEHICLES WHERE ID='a295cafe-2ab6-46a4-8fe7-d157cf628a7e'
DELETE FROM TVEHICLETYPES WHERE ID='acd905db-1d55-4ced-8348-ab93bf487225'
DELETE FROM TMECHANICS WHERE ID='002ddfcd-ef9f-4fe4-92fb-2fc53961b86b'
DELETE FROM TINVOICES WHERE ID='fdc21635-7071-4ebb-949b-bf404f8db560'
COMMIT
DISCONNECT
/*C82*/SET SCHEMA PUBLIC
DISCONNECT
/*C83*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TINVOICES VALUES('c9286fd2-d49b-4e85-9bb9-25bac06ff65e',60.5E0,'2022-11-20',1,'NOT_YET_PAID',0.21E0,1)
INSERT INTO TMECHANICS VALUES('df4ec507-349e-4dd5-bb42-e211e29a4a91','mechanic-dni','no-name','no-surname',1)
INSERT INTO TVEHICLETYPES VALUES('3b3183ca-7d97-4161-9375-2871d9aec5ca','vehicle-type',50.0E0,1)
INSERT INTO TVEHICLES VALUES('7be4294e-e080-464f-890c-248ba017a6cc','make','model','plate-1010',1,NULL,'3b3183ca-7d97-4161-9375-2871d9aec5ca')
INSERT INTO TWORKORDERS VALUES('f301473e-f62c-4463-bc1b-6369b27da74d',50.0E0,'2022-11-20 22:50:08.448000','no-description','INVOICED',1,'c9286fd2-d49b-4e85-9bb9-25bac06ff65e',NULL,'7be4294e-e080-464f-890c-248ba017a6cc')
INSERT INTO TINTERVENTIONS VALUES('7b49f571-8f59-4dfe-b2c9-12af935aa4dd','2022-11-20 22:50:08.448000',60,1,'df4ec507-349e-4dd5-bb42-e211e29a4a91','f301473e-f62c-4463-bc1b-6369b27da74d')
COMMIT
DELETE FROM TINTERVENTIONS WHERE ID='7b49f571-8f59-4dfe-b2c9-12af935aa4dd'
DELETE FROM TWORKORDERS WHERE ID='f301473e-f62c-4463-bc1b-6369b27da74d'
DELETE FROM TVEHICLES WHERE ID='7be4294e-e080-464f-890c-248ba017a6cc'
DELETE FROM TVEHICLETYPES WHERE ID='3b3183ca-7d97-4161-9375-2871d9aec5ca'
DELETE FROM TMECHANICS WHERE ID='df4ec507-349e-4dd5-bb42-e211e29a4a91'
DELETE FROM TINVOICES WHERE ID='c9286fd2-d49b-4e85-9bb9-25bac06ff65e'
COMMIT
DISCONNECT
/*C84*/SET SCHEMA PUBLIC
DISCONNECT
/*C85*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TINVOICES VALUES('39fa193f-48e9-4d1b-bc54-3b4d4e22719c',60.5E0,'2022-11-20',1,'NOT_YET_PAID',0.21E0,1)
INSERT INTO TMECHANICS VALUES('175d82fd-2647-48ab-be77-f041922873ad','mechanic-dni','no-name','no-surname',1)
INSERT INTO TVEHICLETYPES VALUES('5d0f7f09-9c6c-453d-992e-70cb20ce157f','vehicle-type',50.0E0,1)
INSERT INTO TVEHICLES VALUES('87f2aac5-cc50-4471-b3f2-fbba5e1bbb07','make','model','plate-1010',1,NULL,'5d0f7f09-9c6c-453d-992e-70cb20ce157f')
INSERT INTO TWORKORDERS VALUES('60e85c95-1cbc-444b-a5d0-e6a8defef543',50.0E0,'2022-11-20 22:50:08.840000','no-description','INVOICED',1,'39fa193f-48e9-4d1b-bc54-3b4d4e22719c',NULL,'87f2aac5-cc50-4471-b3f2-fbba5e1bbb07')
INSERT INTO TINTERVENTIONS VALUES('0b624062-82e6-4d51-b984-94fba2ea5d28','2022-11-20 22:50:08.840000',60,1,'175d82fd-2647-48ab-be77-f041922873ad','60e85c95-1cbc-444b-a5d0-e6a8defef543')
COMMIT
DELETE FROM TINTERVENTIONS WHERE ID='0b624062-82e6-4d51-b984-94fba2ea5d28'
DELETE FROM TWORKORDERS WHERE ID='60e85c95-1cbc-444b-a5d0-e6a8defef543'
DELETE FROM TVEHICLES WHERE ID='87f2aac5-cc50-4471-b3f2-fbba5e1bbb07'
DELETE FROM TVEHICLETYPES WHERE ID='5d0f7f09-9c6c-453d-992e-70cb20ce157f'
DELETE FROM TMECHANICS WHERE ID='175d82fd-2647-48ab-be77-f041922873ad'
DELETE FROM TINVOICES WHERE ID='39fa193f-48e9-4d1b-bc54-3b4d4e22719c'
COMMIT
DISCONNECT
/*C86*/SET SCHEMA PUBLIC
DISCONNECT
/*C87*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TVEHICLETYPES VALUES('4c5da850-1e20-465f-b922-23faf2809cba','type',50.0E0,1)
INSERT INTO TVEHICLES VALUES('343bfb45-d4fb-4184-8d70-d33c79ea8c0e','make','model','plate-1010',1,NULL,'4c5da850-1e20-465f-b922-23faf2809cba')
COMMIT
DELETE FROM TVEHICLES WHERE ID='343bfb45-d4fb-4184-8d70-d33c79ea8c0e'
DELETE FROM TVEHICLETYPES WHERE ID='4c5da850-1e20-465f-b922-23faf2809cba'
COMMIT
DISCONNECT
/*C88*/SET SCHEMA PUBLIC
DISCONNECT
/*C89*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TVEHICLETYPES VALUES('72865652-18db-4170-8bb4-ffae497c6956','type',50.0E0,1)
INSERT INTO TVEHICLES VALUES('0d38c4e4-432f-45bc-96f5-9c696e96cfe9','make','model','plate-1010',1,NULL,'72865652-18db-4170-8bb4-ffae497c6956')
COMMIT
DELETE FROM TVEHICLES WHERE ID='0d38c4e4-432f-45bc-96f5-9c696e96cfe9'
DELETE FROM TVEHICLETYPES WHERE ID='72865652-18db-4170-8bb4-ffae497c6956'
COMMIT
DISCONNECT
/*C90*/SET SCHEMA PUBLIC
DISCONNECT
/*C91*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TMECHANICS VALUES('2b46015b-dd15-4c80-b38f-18ccba93f84e','dni','name','surname',1)
INSERT INTO TVEHICLES VALUES('bc9bd13c-03f2-47f2-ad5e-dd06b380409c','make','model','plateNumber',1,NULL,NULL)
INSERT INTO TWORKORDERS VALUES('968fc2a7-44ac-4552-9c5f-a1297b6a401f',0.0E0,'2022-11-20 22:50:14.680000','description','FINISHED',1,NULL,NULL,'bc9bd13c-03f2-47f2-ad5e-dd06b380409c')
INSERT INTO TINTERVENTIONS VALUES('88bef514-549a-4d3d-937a-48e621a94ad7','2022-11-20 22:50:14.682000',60,1,'2b46015b-dd15-4c80-b38f-18ccba93f84e','968fc2a7-44ac-4552-9c5f-a1297b6a401f')
COMMIT
DELETE FROM TINTERVENTIONS WHERE ID='88bef514-549a-4d3d-937a-48e621a94ad7'
DELETE FROM TWORKORDERS WHERE ID='968fc2a7-44ac-4552-9c5f-a1297b6a401f'
DELETE FROM TVEHICLES WHERE ID='bc9bd13c-03f2-47f2-ad5e-dd06b380409c'
DELETE FROM TMECHANICS WHERE ID='2b46015b-dd15-4c80-b38f-18ccba93f84e'
COMMIT
DISCONNECT
/*C92*/SET SCHEMA PUBLIC
DISCONNECT
/*C93*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TMECHANICS VALUES('f6c3944c-b709-4b5b-8009-8994bf29dab2','dni','name','surname',1)
INSERT INTO TVEHICLES VALUES('6a184d6a-7b20-4230-bd74-011893df4193','make','model','plateNumber',1,NULL,NULL)
INSERT INTO TWORKORDERS VALUES('e57a2082-3f7b-48bd-8a3b-e15ec0659c10',0.0E0,'2022-11-20 22:50:15.414000','description','FINISHED',1,NULL,NULL,'6a184d6a-7b20-4230-bd74-011893df4193')
INSERT INTO TINTERVENTIONS VALUES('92febc99-b8bb-4968-821b-e5455e2e9ae0','2022-11-20 22:50:15.414000',60,1,'f6c3944c-b709-4b5b-8009-8994bf29dab2','e57a2082-3f7b-48bd-8a3b-e15ec0659c10')
COMMIT
DELETE FROM TINTERVENTIONS WHERE ID='92febc99-b8bb-4968-821b-e5455e2e9ae0'
DELETE FROM TWORKORDERS WHERE ID='e57a2082-3f7b-48bd-8a3b-e15ec0659c10'
DELETE FROM TVEHICLES WHERE ID='6a184d6a-7b20-4230-bd74-011893df4193'
DELETE FROM TMECHANICS WHERE ID='f6c3944c-b709-4b5b-8009-8994bf29dab2'
COMMIT
DISCONNECT
/*C94*/SET SCHEMA PUBLIC
DISCONNECT
/*C95*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TSPAREPARTS VALUES('21e93fd7-8cdf-4f93-9ee0-ba1c80386da8','code','description',100.0E0,1)
COMMIT
DELETE FROM TSPAREPARTS WHERE ID='21e93fd7-8cdf-4f93-9ee0-ba1c80386da8'
COMMIT
DISCONNECT
/*C96*/SET SCHEMA PUBLIC
DISCONNECT
/*C97*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TSPAREPARTS VALUES('ec4682e5-5041-49dd-ae1b-6622414ee4d2','code','description',100.0E0,1)
COMMIT
DELETE FROM TSPAREPARTS WHERE ID='ec4682e5-5041-49dd-ae1b-6622414ee4d2'
COMMIT
DISCONNECT
/*C98*/SET SCHEMA PUBLIC
DISCONNECT
/*C99*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TCLIENTS VALUES('96f6d585-00d0-4989-8cd6-ce1cc7ee6bf8','dni','no-email','nombre','no-phone','apellidos',1,'city','street','zipcode')
COMMIT
DELETE FROM TCLIENTS WHERE ID='96f6d585-00d0-4989-8cd6-ce1cc7ee6bf8'
COMMIT
DISCONNECT
/*C100*/SET SCHEMA PUBLIC
DISCONNECT
/*C101*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TCLIENTS VALUES('9fa29316-48f3-4b95-8868-079dbc5aff93','dni','no-email','nombre','no-phone','apellidos',1,'city','street','zipcode')
COMMIT
DELETE FROM TCLIENTS WHERE ID='9fa29316-48f3-4b95-8868-079dbc5aff93'
COMMIT
DISCONNECT
/*C102*/SET SCHEMA PUBLIC
DISCONNECT
/*C103*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TMECHANICS VALUES('46d0fe41-3910-40f0-8758-cea4193883e0','dni','nombre','apellidos',1)
COMMIT
DELETE FROM TMECHANICS WHERE ID='46d0fe41-3910-40f0-8758-cea4193883e0'
COMMIT
DISCONNECT
/*C104*/SET SCHEMA PUBLIC
DISCONNECT
/*C105*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TMECHANICS VALUES('e0aba2f6-51d7-472e-a764-0739c2bb3c8e','dni','nombre','apellidos',1)
COMMIT
DELETE FROM TMECHANICS WHERE ID='e0aba2f6-51d7-472e-a764-0739c2bb3c8e'
COMMIT
DISCONNECT
/*C106*/SET SCHEMA PUBLIC
DISCONNECT
/*C107*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TCLIENTS VALUES('bba1c62f-9da6-4e2c-af84-5ad3d805a412','dni','no-email','nombre','no-phone','apellidos',1,'city','street','zipcode')
INSERT INTO TPAYMENTMEANS VALUES('f489ac6e-4a0c-4fca-a9f0-bebbb2da90dc','CreditCard',0.0E0,1,'bba1c62f-9da6-4e2c-af84-5ad3d805a412')
INSERT INTO TCREDITCARDS VALUES('f489ac6e-4a0c-4fca-a9f0-bebbb2da90dc','1234-5678','card-type','2023-11-20')
COMMIT
DELETE FROM TCREDITCARDS WHERE ID='f489ac6e-4a0c-4fca-a9f0-bebbb2da90dc'
DELETE FROM TPAYMENTMEANS WHERE ID='f489ac6e-4a0c-4fca-a9f0-bebbb2da90dc'
DELETE FROM TCLIENTS WHERE ID='bba1c62f-9da6-4e2c-af84-5ad3d805a412'
COMMIT
DISCONNECT
/*C108*/SET SCHEMA PUBLIC
DISCONNECT
/*C109*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TCLIENTS VALUES('21aa5aab-370d-48e6-acab-87570f236932','dni','no-email','nombre','no-phone','apellidos',1,'city','street','zipcode')
INSERT INTO TPAYMENTMEANS VALUES('fa4d4c8e-d9a5-4d85-b743-e29e39986db7','CreditCard',0.0E0,1,'21aa5aab-370d-48e6-acab-87570f236932')
INSERT INTO TCREDITCARDS VALUES('fa4d4c8e-d9a5-4d85-b743-e29e39986db7','1234-5678','card-type','2023-11-20')
COMMIT
DELETE FROM TCREDITCARDS WHERE ID='fa4d4c8e-d9a5-4d85-b743-e29e39986db7'
DELETE FROM TPAYMENTMEANS WHERE ID='fa4d4c8e-d9a5-4d85-b743-e29e39986db7'
DELETE FROM TCLIENTS WHERE ID='21aa5aab-370d-48e6-acab-87570f236932'
COMMIT
DISCONNECT
/*C110*/SET SCHEMA PUBLIC
DISCONNECT
/*C111*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TMECHANICS VALUES('52f09c24-9df4-44bb-8d94-e140e42c6809','dni','name','surname',1)
INSERT INTO TVEHICLETYPES VALUES('233de87e-7aa5-45f4-ad15-3cae82c56e2d','vehicle-type',50.0E0,1)
INSERT INTO TVEHICLES VALUES('02c1617e-b09d-4495-aa3a-7df825739662','make','model','plateNumber',1,NULL,'233de87e-7aa5-45f4-ad15-3cae82c56e2d')
INSERT INTO TWORKORDERS VALUES('4482ed89-ac83-41fd-bd38-e379142c1dd7',150.0E0,'2022-11-20 22:50:19.251000','description','FINISHED',1,NULL,NULL,'02c1617e-b09d-4495-aa3a-7df825739662')
INSERT INTO TINTERVENTIONS VALUES('69fbbdd3-bc70-4b8c-8ade-ee116d39a04c','2022-11-20 22:50:19.251000',60,1,'52f09c24-9df4-44bb-8d94-e140e42c6809','4482ed89-ac83-41fd-bd38-e379142c1dd7')
INSERT INTO TSPAREPARTS VALUES('22a689dd-e4b8-4c4f-997d-d6a0ca1cade1','spare-code','spare description',100.0E0,1)
INSERT INTO TSUBSTITUTIONS VALUES('81f353fe-88ae-4cae-a6f7-426958186ebc',1,1,'69fbbdd3-bc70-4b8c-8ade-ee116d39a04c','22a689dd-e4b8-4c4f-997d-d6a0ca1cade1')
COMMIT
DELETE FROM TSUBSTITUTIONS WHERE ID='81f353fe-88ae-4cae-a6f7-426958186ebc'
DELETE FROM TSPAREPARTS WHERE ID='22a689dd-e4b8-4c4f-997d-d6a0ca1cade1'
DELETE FROM TINTERVENTIONS WHERE ID='69fbbdd3-bc70-4b8c-8ade-ee116d39a04c'
DELETE FROM TWORKORDERS WHERE ID='4482ed89-ac83-41fd-bd38-e379142c1dd7'
DELETE FROM TVEHICLES WHERE ID='02c1617e-b09d-4495-aa3a-7df825739662'
DELETE FROM TVEHICLETYPES WHERE ID='233de87e-7aa5-45f4-ad15-3cae82c56e2d'
DELETE FROM TMECHANICS WHERE ID='52f09c24-9df4-44bb-8d94-e140e42c6809'
COMMIT
DISCONNECT
/*C112*/SET SCHEMA PUBLIC
DISCONNECT
/*C113*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TMECHANICS VALUES('4a106a70-65d6-4366-8b13-7e356b1a2e0f','dni','name','surname',1)
INSERT INTO TVEHICLETYPES VALUES('b7efc155-d51a-4302-aa82-f4cead803fba','vehicle-type',50.0E0,1)
INSERT INTO TVEHICLES VALUES('e5068123-67e3-4e56-a61a-842db805250e','make','model','plateNumber',1,NULL,'b7efc155-d51a-4302-aa82-f4cead803fba')
INSERT INTO TWORKORDERS VALUES('5802de73-41e1-4d96-8e46-0bf37befae9e',150.0E0,'2022-11-20 22:50:19.654000','description','FINISHED',1,NULL,NULL,'e5068123-67e3-4e56-a61a-842db805250e')
INSERT INTO TINTERVENTIONS VALUES('e7425597-d99c-4330-a3cb-3d4c14c2f398','2022-11-20 22:50:19.654000',60,1,'4a106a70-65d6-4366-8b13-7e356b1a2e0f','5802de73-41e1-4d96-8e46-0bf37befae9e')
INSERT INTO TSPAREPARTS VALUES('72001ba0-963c-49fd-8318-05ca4fe55475','spare-code','spare description',100.0E0,1)
INSERT INTO TSUBSTITUTIONS VALUES('1be3d637-5696-4af4-90f7-2fea9fe04b1a',1,1,'e7425597-d99c-4330-a3cb-3d4c14c2f398','72001ba0-963c-49fd-8318-05ca4fe55475')
COMMIT
DELETE FROM TSUBSTITUTIONS WHERE ID='1be3d637-5696-4af4-90f7-2fea9fe04b1a'
DELETE FROM TSPAREPARTS WHERE ID='72001ba0-963c-49fd-8318-05ca4fe55475'
DELETE FROM TINTERVENTIONS WHERE ID='e7425597-d99c-4330-a3cb-3d4c14c2f398'
DELETE FROM TWORKORDERS WHERE ID='5802de73-41e1-4d96-8e46-0bf37befae9e'
DELETE FROM TVEHICLES WHERE ID='e5068123-67e3-4e56-a61a-842db805250e'
DELETE FROM TVEHICLETYPES WHERE ID='b7efc155-d51a-4302-aa82-f4cead803fba'
DELETE FROM TMECHANICS WHERE ID='4a106a70-65d6-4366-8b13-7e356b1a2e0f'
COMMIT
DISCONNECT
/*C114*/SET SCHEMA PUBLIC
DISCONNECT
/*C115*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TCLIENTS VALUES('caf42e8c-71a5-47e6-ae45-2d54f2617613','dni','no-email','nombre','no-phone','apellidos',1,'city','street','zipcode')
INSERT INTO TPAYMENTMEANS VALUES('93742fd9-7617-43ec-ad34-445d44ac97ba','Voucher',0.0E0,1,'caf42e8c-71a5-47e6-ae45-2d54f2617613')
INSERT INTO TVOUCHERS VALUES('93742fd9-7617-43ec-ad34-445d44ac97ba',100.0E0,'voucher-code','voucher-description')
COMMIT
DELETE FROM TVOUCHERS WHERE ID='93742fd9-7617-43ec-ad34-445d44ac97ba'
DELETE FROM TPAYMENTMEANS WHERE ID='93742fd9-7617-43ec-ad34-445d44ac97ba'
DELETE FROM TCLIENTS WHERE ID='caf42e8c-71a5-47e6-ae45-2d54f2617613'
COMMIT
DISCONNECT
/*C116*/SET SCHEMA PUBLIC
DISCONNECT
/*C117*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TCLIENTS VALUES('13f762ba-1e8e-4ea7-9b8a-6f28df4a6d20','dni','no-email','nombre','no-phone','apellidos',1,'city','street','zipcode')
INSERT INTO TPAYMENTMEANS VALUES('0e886fa2-bb36-40e6-91c5-fc2d23f9ad82','Voucher',0.0E0,1,'13f762ba-1e8e-4ea7-9b8a-6f28df4a6d20')
INSERT INTO TVOUCHERS VALUES('0e886fa2-bb36-40e6-91c5-fc2d23f9ad82',100.0E0,'voucher-code','voucher-description')
COMMIT
DELETE FROM TVOUCHERS WHERE ID='0e886fa2-bb36-40e6-91c5-fc2d23f9ad82'
DELETE FROM TPAYMENTMEANS WHERE ID='0e886fa2-bb36-40e6-91c5-fc2d23f9ad82'
DELETE FROM TCLIENTS WHERE ID='13f762ba-1e8e-4ea7-9b8a-6f28df4a6d20'
COMMIT
DISCONNECT
/*C118*/SET SCHEMA PUBLIC
DISCONNECT
/*C119*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TINVOICES VALUES('1cf08618-1b97-4232-9e45-d7d7ac5e5d4c',0.0E0,'2022-11-20',1,'NOT_YET_PAID',0.21E0,1)
INSERT INTO TMECHANICS VALUES('9268321f-2e67-436c-a56a-a6f2447cc7d4','dni','name','surname',1)
INSERT INTO TVEHICLES VALUES('1178d497-a0f8-4243-8e21-44f58b30a190','make','model','plateNumber',1,NULL,NULL)
INSERT INTO TWORKORDERS VALUES('6d469b35-1105-457f-be42-66f1168dd941',0.0E0,'2022-11-20 22:50:20.837000','description','INVOICED',1,'1cf08618-1b97-4232-9e45-d7d7ac5e5d4c',NULL,'1178d497-a0f8-4243-8e21-44f58b30a190')
COMMIT
DELETE FROM TWORKORDERS WHERE ID='6d469b35-1105-457f-be42-66f1168dd941'
DELETE FROM TVEHICLES WHERE ID='1178d497-a0f8-4243-8e21-44f58b30a190'
DELETE FROM TMECHANICS WHERE ID='9268321f-2e67-436c-a56a-a6f2447cc7d4'
DELETE FROM TINVOICES WHERE ID='1cf08618-1b97-4232-9e45-d7d7ac5e5d4c'
COMMIT
DISCONNECT
/*C120*/SET SCHEMA PUBLIC
DISCONNECT
/*C121*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TINVOICES VALUES('acfb5064-127f-458c-9fa6-1c70be227ff5',0.0E0,'2022-11-20',1,'NOT_YET_PAID',0.21E0,1)
INSERT INTO TMECHANICS VALUES('b024d3e6-6871-490d-a0d2-482835e70d35','dni','name','surname',1)
INSERT INTO TVEHICLES VALUES('30e8e6b0-c6b9-4caf-b993-63c95b3db08a','make','model','plateNumber',1,NULL,NULL)
INSERT INTO TWORKORDERS VALUES('70494f71-e687-4776-a518-9c5bea536470',0.0E0,'2022-11-20 22:50:21.217000','description','INVOICED',1,'acfb5064-127f-458c-9fa6-1c70be227ff5',NULL,'30e8e6b0-c6b9-4caf-b993-63c95b3db08a')
COMMIT
DELETE FROM TWORKORDERS WHERE ID='70494f71-e687-4776-a518-9c5bea536470'
DELETE FROM TVEHICLES WHERE ID='30e8e6b0-c6b9-4caf-b993-63c95b3db08a'
DELETE FROM TMECHANICS WHERE ID='b024d3e6-6871-490d-a0d2-482835e70d35'
DELETE FROM TINVOICES WHERE ID='acfb5064-127f-458c-9fa6-1c70be227ff5'
COMMIT
DISCONNECT
/*C122*/SET SCHEMA PUBLIC
DISCONNECT
/*C123*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TVEHICLETYPES VALUES('377c088f-f6b8-40b6-b348-43f07b46d5e4','vehicleType',50.0E0,1)
COMMIT
DELETE FROM TVEHICLETYPES WHERE ID='377c088f-f6b8-40b6-b348-43f07b46d5e4'
COMMIT
DISCONNECT
/*C124*/SET SCHEMA PUBLIC
DISCONNECT
/*C125*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TVEHICLETYPES VALUES('e525faab-cc25-4b06-b689-92f1a4685193','vehicleType',50.0E0,1)
COMMIT
DELETE FROM TVEHICLETYPES WHERE ID='e525faab-cc25-4b06-b689-92f1a4685193'
COMMIT
DISCONNECT
/*C126*/SET SCHEMA PUBLIC
DISCONNECT
/*C127*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TVEHICLES VALUES('2b72632e-e5aa-404a-830c-c23e30d2e58a','make','model','plateNumber',1,NULL,NULL)
INSERT INTO TWORKORDERS VALUES('4ea06dc4-938d-42bb-b45d-1136500b2b99',0.0E0,'2022-11-20 22:50:22.357000','description','OPEN',1,NULL,NULL,'2b72632e-e5aa-404a-830c-c23e30d2e58a')
COMMIT
DELETE FROM TWORKORDERS WHERE ID='4ea06dc4-938d-42bb-b45d-1136500b2b99'
DELETE FROM TVEHICLES WHERE ID='2b72632e-e5aa-404a-830c-c23e30d2e58a'
COMMIT
DISCONNECT
/*C128*/SET SCHEMA PUBLIC
DISCONNECT
/*C129*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TVEHICLES VALUES('88dd68b4-411b-48b3-bd7d-46dbf641a137','make','model','plateNumber',1,NULL,NULL)
INSERT INTO TWORKORDERS VALUES('81aaffe8-c1bd-4851-a309-d232007ad0b1',0.0E0,'2022-11-20 22:50:22.739000','description','OPEN',1,NULL,NULL,'88dd68b4-411b-48b3-bd7d-46dbf641a137')
COMMIT
DELETE FROM TWORKORDERS WHERE ID='81aaffe8-c1bd-4851-a309-d232007ad0b1'
DELETE FROM TVEHICLES WHERE ID='88dd68b4-411b-48b3-bd7d-46dbf641a137'
COMMIT
DISCONNECT
/*C130*/SET SCHEMA PUBLIC
DISCONNECT
/*C131*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TCLIENTS VALUES('ee978f3c-183f-4b42-bea0-1054efa81609','dni','no-email','nombre','no-phone','apellidos',1,'city','street','zipcode')
INSERT INTO TINVOICES VALUES('b9acf0cc-d6c3-41ff-823b-45fb2bf30b2f',0.0E0,'2022-11-20',1001,'NOT_YET_PAID',0.0E0,1)
INSERT INTO TPAYMENTMEANS VALUES('ab9f7d38-356b-4f1f-b43d-0594c1ff44e4','Voucher',0.0E0,1,'ee978f3c-183f-4b42-bea0-1054efa81609')
INSERT INTO TCHARGES VALUES('d6354af2-df82-4a2e-81ed-7f470d57afeb',0.0E0,1,'b9acf0cc-d6c3-41ff-823b-45fb2bf30b2f','ab9f7d38-356b-4f1f-b43d-0594c1ff44e4')
INSERT INTO TVOUCHERS VALUES('ab9f7d38-356b-4f1f-b43d-0594c1ff44e4',100.0E0,'voucher-code','voucher-description')
COMMIT
DELETE FROM TCHARGES WHERE ID='d6354af2-df82-4a2e-81ed-7f470d57afeb'
DELETE FROM TVOUCHERS WHERE ID='ab9f7d38-356b-4f1f-b43d-0594c1ff44e4'
DELETE FROM TPAYMENTMEANS WHERE ID='ab9f7d38-356b-4f1f-b43d-0594c1ff44e4'
DELETE FROM TINVOICES WHERE ID='b9acf0cc-d6c3-41ff-823b-45fb2bf30b2f'
DELETE FROM TCLIENTS WHERE ID='ee978f3c-183f-4b42-bea0-1054efa81609'
COMMIT
DISCONNECT
/*C132*/SET SCHEMA PUBLIC
DISCONNECT
/*C133*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TCLIENTS VALUES('425ad471-b803-46b8-8d15-210286d960f8','dni','no-email','nombre','no-phone','apellidos',1,'city','street','zipcode')
INSERT INTO TINVOICES VALUES('6359de86-ec0f-4e62-b16c-d3de08a4bace',0.0E0,'2022-11-20',1001,'NOT_YET_PAID',0.0E0,1)
INSERT INTO TPAYMENTMEANS VALUES('54bbcbc4-3a27-4cf7-96d2-30c7290a2b28','Voucher',0.0E0,1,'425ad471-b803-46b8-8d15-210286d960f8')
INSERT INTO TCHARGES VALUES('4b95cd62-f980-49f8-af28-ff816347e3de',0.0E0,1,'6359de86-ec0f-4e62-b16c-d3de08a4bace','54bbcbc4-3a27-4cf7-96d2-30c7290a2b28')
INSERT INTO TVOUCHERS VALUES('54bbcbc4-3a27-4cf7-96d2-30c7290a2b28',100.0E0,'voucher-code','voucher-description')
COMMIT
DELETE FROM TCHARGES WHERE ID='4b95cd62-f980-49f8-af28-ff816347e3de'
DELETE FROM TVOUCHERS WHERE ID='54bbcbc4-3a27-4cf7-96d2-30c7290a2b28'
DELETE FROM TPAYMENTMEANS WHERE ID='54bbcbc4-3a27-4cf7-96d2-30c7290a2b28'
DELETE FROM TINVOICES WHERE ID='6359de86-ec0f-4e62-b16c-d3de08a4bace'
DELETE FROM TCLIENTS WHERE ID='425ad471-b803-46b8-8d15-210286d960f8'
COMMIT
DISCONNECT
/*C134*/SET SCHEMA PUBLIC
DISCONNECT
/*C135*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TVEHICLES VALUES('1df2e50c-c282-41f4-bc33-f02210cc21ff','make','model','plate-1010',1,NULL,NULL)
COMMIT
DELETE FROM TVEHICLES WHERE ID='1df2e50c-c282-41f4-bc33-f02210cc21ff'
COMMIT
DISCONNECT
/*C136*/SET SCHEMA PUBLIC
DISCONNECT
/*C137*/SET SCHEMA PUBLIC
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_INVOICE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_MECHANIC_ID
ALTER TABLE TWorkorders DROP CONSTRAINT FK_TWorkorders_VEHICLE_ID
ALTER TABLE TWorkorders DROP CONSTRAINT UNQ_TWorkorders_0
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCreditCards DROP CONSTRAINT FK_TCreditCards_ID
ALTER TABLE TPayrolls DROP CONSTRAINT FK_TPayrolls_CONTRACT_ID
ALTER TABLE TPayrolls DROP CONSTRAINT UNQ_TPayrolls_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_FIREDMECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_MECHANIC_ID
ALTER TABLE TContracts DROP CONSTRAINT FK_TContracts_CONTRACTTYPE_ID
ALTER TABLE TContracts DROP CONSTRAINT UNQ_TContracts_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
DROP TABLE TWorkorders
DROP TABLE TCharges
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TSubstitutions
DROP TABLE TCreditCards
DROP TABLE TInvoices
DROP TABLE TPayrolls
DROP TABLE TProfessionalGroups
DROP TABLE TContractTypes
DROP TABLE TVehicleTypes
DROP TABLE TSpareparts
DROP TABLE TVehicles
DROP TABLE TMechanics
DROP TABLE TCashes
DROP TABLE TContracts
DROP TABLE TVouchers
CREATE TABLE TWorkorders (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TPayrolls (ID VARCHAR(255) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TProfessionalGroups (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TContractTypes (ID VARCHAR(255) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(255) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TContracts (ID VARCHAR(255) NOT NULL, ANNUALBASEWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(255), FIREDMECHANIC_ID VARCHAR(255), PROFESSIONALGROUP_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TWorkorders ADD CONSTRAINT UNQ_TWorkorders_0 UNIQUE (VEHICLE_ID, DATE)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (INVOICE_ID, PAYMENTMEAN_ID)
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (WORKORDER_ID, MECHANIC_ID, DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCreditCards ADD CONSTRAINT UNQ_TCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPayrolls ADD CONSTRAINT UNQ_TPayrolls_2 UNIQUE (DATE)
ALTER TABLE TProfessionalGroups ADD CONSTRAINT UNQ_TProfessionalGroups_1 UNIQUE (NAME)
ALTER TABLE TContractTypes ADD CONSTRAINT UNQ_TContractTypes_2 UNIQUE (NAME)
ALTER TABLE TVehicleTypes ADD CONSTRAINT UNQ_TVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TContracts ADD CONSTRAINT UNQ_TContracts_4 UNIQUE (STARTDATE)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWorkorders ADD CONSTRAINT FK_TWorkorders_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWorkorders (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCreditCards ADD CONSTRAINT FK_TCreditCards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TPayrolls ADD CONSTRAINT FK_TPayrolls_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TContracts (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicleTypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TProfessionalGroups (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TContracts ADD CONSTRAINT FK_TContracts_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TContractTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
INSERT INTO TVEHICLES VALUES('dd079070-3f5d-41ae-9d35-d81b07975d1e','make','model','plate-1010',1,NULL,NULL)
COMMIT
DELETE FROM TVEHICLES WHERE ID='dd079070-3f5d-41ae-9d35-d81b07975d1e'
COMMIT
DISCONNECT
